!function(e){function t(t){for(var i,a,n=t[0],o=t[1],c=t[2],p=0,u=[];p<n.length;p++)a=n[p],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&u.push(r[a][0]),r[a]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);for(d&&d(t);u.length;)u.shift()();return l.push.apply(l,c||[]),s()}function s(){for(var e,t=0;t<l.length;t++){for(var s=l[t],i=!0,n=1;n<s.length;n++){var o=s[n];0!==r[o]&&(i=!1)}i&&(l.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},r={1:0},l=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./";var n=window.webpackJsonp=window.webpackJsonp||[],o=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=o;l.push([105,0,2]),s()}({105:function(e,t,s){e.exports=s(174)},116:function(e,t){},118:function(e,t){},174:function(e,t,s){"use strict";s.r(t);s(106);var i=s(2);var r=[function(e,t,s){return["@media (display-mode:standalone){.app",t,"{border-top:1px solid #fff}}.app",t,"{display:flex;flex-direction:column;width:100%;height:100%}.body",t,"{flex:1;flex-direction:row}.body",t,",.left-panel",t,"{display:flex;background-color:#fff}.left-panel",t,"{height:100%;width:300px;position:relative;border-right:1px solid #dddbda}.right-panel",t,"{display:flex;flex:1;flex-direction:column}.right-top-panel",t,"{border-bottom:1px solid #dddbda;height:300px;display:flex}.right-top-left-panel",t,"{flex:1;border-right:1px solid #dddbda;display:flex;flex-direction:column}.right-top-right-panel",t,"{width:300px}.right-bottom-panel",t,"{flex:1;display:flex;flex-direction:column}"].join("")}],l=s(11),a=s.n(l);function n(e,t,s,i){const{t:r,h:l}=e;return[l("div",{classMap:{"slds-spinner_container":!0},key:4},[l("div",{className:t.className,attrs:{role:"status"},key:3},[l("span",{classMap:{"slds-assistive-text":!0},key:0},[r("Loading")]),l("div",{classMap:{"slds-spinner__dot-a":!0},key:1},[]),l("div",{classMap:{"slds-spinner__dot-b":!0},key:2},[])])])]}var o=Object(i.registerTemplate)(n);n.stylesheets=[],a.a&&n.stylesheets.push.apply(n.stylesheets,a.a),n.stylesheetTokens={hostAttribute:"base-spinner-_spinner-host",shadowAttribute:"base-spinner-_spinner"};class c extends i.LightningElement{constructor(...e){super(...e),this.size="medium"}close(){this.template.host.remove()}get className(){return`slds-spinner slds-spinner_${this.size} slds-spinner_brand`}}Object(i.registerDecorators)(c,{publicProps:{size:{config:0}},publicMethods:["close"]});var d=Object(i.registerComponent)(c,{tmpl:o});var p=[function(e,t,s){return[".header-logo",t,"{height:43.2px;width:180px}"].join("")}];function u(e,t,s,r){const{h:l,d:a,t:n,b:o}=e,{_m0:c}=r;return[l("header",{classMap:{"slds-builder-header":!0},key:20},[l("div",{classMap:{"slds-builder-header__item":!0},key:3},[l("div",{classMap:{"slds-builder-header__item-label":!0,"slds-media":!0,"slds-media_center":!0},key:2},[l("a",{attrs:{href:"/"},key:1},[l("img",{classMap:{"header-logo":!0},attrs:{src:"./resources/imgs/logo_white.svg"},key:0},[])])])]),l("div",{classMap:{"slds-builder-header__item":!0,"slds-builder-header__utilities":!0},key:19},[t.apiUsage?l("div",{classMap:{"slds-builder-header__utilities-item":!0},key:5},[l("h1",{classMap:{"slds-builder-header__item-label":!0},key:4},[a(t.i18n.HEADER_API_USAGE),n(": "),a(t.apiUsage)])]):null,t.userLabel?l("div",{classMap:{"slds-builder-header__utilities-item":!0},key:7},[l("h1",{classMap:{"slds-builder-header__item-label":!0},key:6},[a(t.userLabel)])]):null,t.isLoggedIn?l("div",{classMap:{"slds-builder-header__utilities-item":!0},key:14},[l("a",{classMap:{"slds-builder-header__item-action":!0,"slds-media":!0,"slds-media_center":!0},attrs:{href:"javascript:void(0);"},key:13,on:{click:c||(r._m0=o(t.logout))}},[l("div",{classMap:{"slds-media__figure":!0},key:11},[l("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-logout":!0,"slds-current-color":!0},key:10},[l("svg",{classMap:{"slds-icon":!0,"slds-icon_x-small":!0},attrs:{"aria-hidden":"true"},key:9},[l("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#logout")},key:8},[])])])]),l("div",{classMap:{"slds-media__body":!0},key:12},[a(t.i18n.HEADER_LOGOUT)])])]):null,l("div",{classMap:{"slds-builder-header__utilities-item":!0},key:18},[l("a",{classMap:{"slds-builder-header__item-action":!0,"slds-media":!0,"slds-media_center":!0},attrs:{href:"https://github.com/lwc-soql-builder/lwc-soql-builder",target:"_blank"},key:17},[l("span",{classMap:{"slds-avatar":!0},key:16},[l("img",{attrs:{src:"./resources/imgs/GitHub-Mark-Light-64px.png"},key:15},[])])])])])])]}var h=Object(i.registerTemplate)(u);u.stylesheets=[],p&&u.stylesheets.push.apply(u.stylesheets,p),u.stylesheetTokens={hostAttribute:"cmp-header-_header-host",shadowAttribute:"cmp-header-_header"};var _=s(41),b=s(102);function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function v(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_SOBJECT":return g(g({},e),{},{isFetching:!0});case"RECEIVE_SOBJECT_SUCCESS":return g(g({},e),{},{isFetching:!1,data:t.payload.data,error:null});case"RECEIVE_SOBJECT_ERROR":return g(g({},e),{},{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_SOBJECT_ERROR":return g(g({},e),{},{error:void 0});default:return e}}function L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?L(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var w=s(4);const j={ASC:"ASC",DESC:"DESC"};var C=s(20),R=s.n(C);function T(e){return e?e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):""}const A=new RegExp("^([a-z]|_(?!_))*[a-z]__(?:[cr]|Share|latitude__s|longitude__s)$","i");let I,P,x;function M(){return"ja"===navigator.language?"https://asia-northeast1-lwc-soql-builder.cloudfunctions.net/asia_northeast1/proxy/":"https://us-central1-lwc-soql-builder.cloudfunctions.net/us_central1/proxy/"}function D(){return{clientId:"3MVG9n_HvETGhr3Bp2TP0lUhBaOTAOuCH9OKmjFKsspVG.z8WOx0Vb94skZ8d4wHTVuMf5DArbdwCb05yIAT5",redirectUri:`${window.location.origin}${window.location.pathname}`,version:x,proxyUrl:M()}}async function N(e){e=e||(()=>{});try{const t=await I.request("/services/oauth2/userinfo");await async function(){if(x=sessionStorage.getItem("lsb.apiVersion"),x)I.version=x;else{const e=await I.request("/services/data/");x=e[e.length-1].version,I.version=x,sessionStorage.setItem("lsb.apiVersion",x)}}();const s=await I.metadata.describe(x);P=s.organizationNamespace,e(null,t)}catch(t){e(t),F()}}function F(){I=null,R.a.browser.logout(),se.dispatch({type:"LOGOUT"})}function U(e){window.open=()=>null,R.a.browser.login({loginUrl:e})}function Q(){return!(!I||!I.accessToken)}function q(){return P?{"Sforce-Call-Options":"defaultNamespace="+P}:{}}function B(e){return e?P&&A.test(e)?`${P}__${e}`:e:null}function H(e){return e?P?Array.isArray(e)?e.map(e=>B(e)):e.split(".").map(e=>B(e)).join("."):e:null}function J(e){if(!e)return null;if(!P)return e;const t=T(P),s=new RegExp(`^${t}__(.*)$`,"i"),i=e.match(s);return i?i[1]:e}function $(e){return e?P?Array.isArray(e)?e.map(e=>J(e)):e.split(".").map(e=>J(e)).join("."):e:null}function Y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const W={fields:[Object(w.b)("Id")],sObject:void 0};function z(e,t){return t?`${t}.${e}`:e}function K(e,t,s){t=$(t),s=$(s);const i=$(Object(w.c)(e)),r=$(z(t,s));return i.includes(r)?V(V({},e),{},{fields:e.fields.filter(e=>{const t=e.relationships&&e.relationships.join(".");return $(z(e.field,t))!==r})}):V(V({},e),{},s?{fields:[...e.fields,Object(w.b)({field:t,relationships:s.split(".")})]}:{fields:[...e.fields,Object(w.b)(t)]})}function X(e=[],t){const{soql:s}=t.payload,i=[s,...e.filter(e=>e!==s).slice(0,19)];try{localStorage.setItem("lsb.recentQueries",JSON.stringify(i))}catch(e){console.warn("Failed to save recent queries from localStorage",e)}return i}function Z(){try{const e=localStorage.getItem("lsb.recentQueries");if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load recent queries from localStorage",e)}return[]}function ee(e=W,t){const{fieldName:s,relationships:i,childRelationship:r}=t.payload;return r?function(e,t,s,i){t=$(t),i=$(i);const r=e.fields.find(e=>e.subquery&&$(e.subquery.relationshipName)===i);if(!r)return V(V({},e),{},{fields:[...e.fields,Object(w.b)({subquery:{fields:[Object(w.b)(t)],relationshipName:i}})]});s=$(s);const l=K(r.subquery,t,s),a=e.fields.map(e=>e.subquery&&$(e.subquery.relationshipName)===i?V(V({},e),{},{subquery:l}):e);return V(V({},e),{},{fields:a})}(e,s,i,r):K(e,s,i)}let te=[b.a];const se=Object(_.c)(Object(_.b)({sobjects:function(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_SOBJECTS":return y(y({},e),{},{isFetching:!0});case"RECEIVE_SOBJECTS_SUCCESS":return y(y({},e),{},{isFetching:!1,data:t.payload.data,error:null});case"RECEIVE_SOBJECTS_ERROR":return y(y({},e),{},{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_SOBJECTS_ERROR":return y(y({},e),{},{error:void 0});default:return e}},sobject:function(e={},t){switch(t.type){case"REQUEST_SOBJECT":case"RECEIVE_SOBJECT_SUCCESS":case"RECEIVE_SOBJECT_ERROR":case"CLEAR_SOBJECT_ERROR":{const s=e[t.payload.sObjectName];return g(g({},e),{},{[t.payload.sObjectName]:v(s,t)})}default:return e}},query:function(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_QUERY":return S(S({},e),{},{isFetching:!0,data:void 0,error:void 0});case"RECEIVE_QUERY_SUCCESS":return S(S({},e),{},{isFetching:!1,data:t.payload.data,error:void 0});case"RECEIVE_QUERY_ERROR":return S(S({},e),{},{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_QUERY_ERROR":return S(S({},e),{},{error:void 0});default:return e}},ui:function(e={},t){switch(t.type){case"LOGIN":return V(V({},e),{},{isLoggedIn:!0,user:t.payload.user});case"LOGOUT":return V(V({},e),{},{isLoggedIn:!1});case"UPDATE_API_LIMIT":{const{limitInfo:t}=I;return V(V({},e),{},{apiUsage:t?t.apiUsage:void 0})}case"RECEIVE_QUERY_SUCCESS":return V(V({},e),{},{recentQueries:X(e.recentQueries,t),childRelationship:void 0});case"LOAD_RECENT_QUERIES":return V(V({},e),{},{recentQueries:Z()});case"SELECT_SOBJECT":{const{sObjectName:s}=t.payload,i=V(V({},W),{},{sObject:$(s)});return V(V({},e),{},{selectedSObject:s,query:i,soql:Object(w.a)(i,{format:!0})})}case"DESELECT_SOBJECT":return V(V({},e),{},{selectedSObject:void 0,sort:void 0});case"TOGGLE_FIELD":{const s=ee(e.query,t);return V(V({},e),{},{query:s,soql:Object(w.a)(s,{format:!0})})}case"TOGGLE_RELATIONSHIP":{const s=function(e=[],t){const{relationshipName:s}=t.payload,i=$(s);if($(Object(w.c)(e)).includes(i))return V(V({},e),{},{fields:e.fields.filter(e=>!e.subquery||$(e.subquery.relationshipName)!==i)});const r={fields:[Object(w.b)("Id")],relationshipName:i};return V(V({},e),{},{fields:[...e.fields,Object(w.b)({subquery:r})]})}(e.query,t);return V(V({},e),{},{query:s,soql:Object(w.a)(s,{format:!0})})}case"UPDATE_SOQL":{const{soql:s}=t.payload;if(!s.trim())return V(V({},e),{},{selectedSObject:void 0,query:void 0,soql:s});const i=Object(w.d)(s)?Object(w.e)(s):e.query;return V(V({},e),{},{selectedSObject:i?i.sObject:void 0,query:i,soql:s})}case"FORMAT_SOQL":return V(V({},e),{},{soql:Object(w.a)(e.query,{format:!0})});case"SELECT_CHILD_RELATIONSHIP":return V(V({},e),{},{childRelationship:t.payload.childRelationship});case"DESELECT_CHILD_RELATIONSHIP":return V(V({},e),{},{childRelationship:void 0});case"SELECT_ALL_FIELDS":{const s=function(e=W,t){const{sObjectMeta:s}=t.payload;return V(V({},e),{},{fields:s.fields.map(e=>Object(w.b)($(e.name)))})}(e.query,t);return V(V({},e),{},{query:s,soql:Object(w.a)(s,{format:!0})})}case"CLEAR_ALL_FIELDS":{const t=function(e=W){return V(V({},e),{},{fields:[Object(w.b)("Id")]})}(e.query);return V(V({},e),{},{query:t,soql:Object(w.a)(t,{format:!0})})}case"SORT_FIELDS":{const{sort:s}=t.payload;return V(V({},e),{},{sort:s})}default:return e}}}),Object(_.a)(...te));class ie{constructor(e){this.dataCallback=void 0,this.store=void 0,this.subscription=void 0,this.connected=!1,this.dataCallback=e}connect(){this.connected=!0,this.subscribeToStore()}disconnect(){this.unsubscribeFromStore(),this.connected=!1}update(e){this.unsubscribeFromStore(),this.store=e.store,this.subscribeToStore()}subscribeToStore(){if(this.connected&&this.store){const e=()=>{const e=this.store.getState();this.dataCallback(e)};this.subscription=this.store.subscribe(e),e()}}unsubscribeFromStore(){this.subscription&&(this.subscription(),this.subscription=void 0)}}function re(e){return{type:"UPDATE_SOQL",payload:{soql:e}}}function le(e){return{type:"SORT_FIELDS",payload:{sort:{order:e}}}}function ae(){return(e,t)=>{(function({sobjects:e}){return!e||!e.data})(t())&&e(async e=>{Q()&&(e({type:"REQUEST_SOBJECTS"}),I.describeGlobal().then(t=>{e({type:"RECEIVE_SOBJECTS_SUCCESS",payload:{data:t}}),e({type:"UPDATE_API_LIMIT"})}).catch(t=>{e({type:"RECEIVE_SOBJECTS_ERROR",payload:{error:t}})}))})}}function ne(e){return(t,s)=>{(function({sobject:e},t){return!e[t]||!e[t].data})(s(),e)&&t(function(e){return async t=>{Q()&&(t(function(e){return{type:"REQUEST_SOBJECT",payload:{sObjectName:e}}}(e)),I.describe(e).then(s=>{t(function(e,t){return{type:"RECEIVE_SOBJECT_SUCCESS",payload:{sObjectName:e,data:t}}}(e,s)),t({type:"UPDATE_API_LIMIT"})}).catch(s=>{t(function(e,t){return{type:"RECEIVE_SOBJECT_ERROR",payload:{sObjectName:e,error:t}}}(e,s))}))}}(e))}}Object(i.registerDecorators)(ie,{fields:["dataCallback","store","subscription","connected"]});const oe={en:{HEADER_API_USAGE:"API Usage",HEADER_LOGOUT:"Logout",FIELDS_PANEL_FIELDS:"Fields",FIELDS_PANEL_CHILD_REL:"Child Relationships",FIELDS_PANEL_FAILED_DESCRIBE_OBJ:"Failed to describe sObject",FIELDS_PANEL_BACK:"Back",FIELDS_PANEL_FILTER_FIELDS:"Filter fields",FIELDS_PANEL_QUICK_FIND:"Quick Find",FIELDS_PANEL_SHOW_MENU:"Show Menu",FIELDS_PANEL_SELECT_ALL_FIELDS:"Select All Fields",FIELDS_PANEL_CLEAR_ALL_FIELDS:"Clear All Fields",FIELDS_PANEL_SORT_ASC:"Sort By FieldName (ASC)",FIELDS_PANEL_SORT_DESC:"Sort By FieldName (DESC)",FIELDS_PANEL_KEYWORD_CLEAR:"Clear",FIELDS_TREE_NO_MATCHING_FIELD:"No matching field found",FIELDS_TREE_EXPAND_REFERENCE:"Expand Reference Field",FIELDS_TREE_FILE_LEVELS_MESSAGE:"No more than five levels can be specified in a child-to-parent relationship.",OUTPUT_CELL_SHOW_CHILD_REL:"Show Child Relationship",OUTPUT_PANEL_FAILED_SOQL:"Failed to execute SOQL",OUTPUT_PANEL_FAILED_EXPORT_CSV:"Failed to export CSV",OUTPUT_PANEL_EXPORT_CSV:"Export CSV",OUTPUT_PANEL_TOTAL:"Total",OUTPUT_PANEL_CLOSE_CHILD_REL:"Close Child Relationship",OUTPUT_TABLE_FAILED_FETCH_NEXT:"Failed to fetch next records",QUERY_EDITOR_PANEL_QUERY:"Query",QUERY_EDITOR_PANEL_QUERY_ALL:"Query All",QUERY_EDITOR_PANEL_QUERY_ALL_TITLE:"Query All will return records that have been deleted",QUERY_EDITOR_PANEL_FORMAT_SOQL:"Format SOQL",QUERY_EDITOR_PANEL_INPUT_SOQL:"Input SOQL",QUERY_LIST_PANEL_RECENT_QUERIES:"Recent Queries",RELATIONSHIPS_TREE_NO_MATCHING:"No matching child relationships found",RELATIONSHIPS_TREE_EXPAND_CHILD_REL:"Expand Child Relationship",SOBJECTS_PANEL_FAILED_FETCH_SOBJECTS:"Failed to fetch sObjects.",SOBJECTS_PANEL_SOBJECTS:"SObjects",SOBJECTS_PANEL_FILTER_SOBJECTS:"Filter sObjects",SOBJECTS_PANEL_QUICK_FIND:"Quick Find",SOBJECTS_PANEL_NO_MATCHING:"No matching sObjects found",SOBJECTS_PANEL_KEYWORD_CLEAR:"Clear",WELCOME_TITLE:"Welcome to LWC SOQL Builder!",WELCOME_DESCRIPTION:"LWC SOQL Builder is a SOQL execution tool developed in Lightning Web Components Open Source, which provides useful features such as viewing the list of items, completing item names, saving queries, and exporting execution results to CSV.",WELCOME_LOGIN_PRODUCTION:"Login to Production Org",WELCOME_LOGIN_SANDBOX:"Login to Sandbox Org",WELCOME_BACK_HOME:"Back to Home"},ja:{HEADER_API_USAGE:"API使用量",HEADER_LOGOUT:"ログアウト",FIELDS_PANEL_FIELDS:"項目",FIELDS_PANEL_CHILD_REL:"子リレーション",FIELDS_PANEL_FAILED_DESCRIBE_OBJ:"オブジェクトのメタデータの取得に失敗しました。",FIELDS_PANEL_BACK:"戻る",FIELDS_PANEL_FILTER_FIELDS:"項目の絞り込み",FIELDS_PANEL_QUICK_FIND:"項目の検索",FIELDS_PANEL_SHOW_MENU:"メニューの表示",FIELDS_PANEL_SELECT_ALL_FIELDS:"すべての項目の選択",FIELDS_PANEL_CLEAR_ALL_FIELDS:"すべての項目の選択解除",FIELDS_PANEL_SORT_ASC:"項目API名でソート (昇順)",FIELDS_PANEL_SORT_DESC:"項目API名でソート (降順)",FIELDS_PANEL_KEYWORD_CLEAR:"クリア",FIELDS_TREE_NO_MATCHING_FIELD:"項目がありません",FIELDS_TREE_EXPAND_REFERENCE:"参照項目を開く",FIELDS_TREE_FILE_LEVELS_MESSAGE:"親オブジェクトは５階層までしか指定できません。",OUTPUT_CELL_SHOW_CHILD_REL:"子リレーションを表示",OUTPUT_PANEL_FAILED_SOQL:"SOQLの実行に失敗しました。",OUTPUT_PANEL_FAILED_EXPORT_CSV:"CSVのエクスポートに失敗しました。",OUTPUT_PANEL_EXPORT_CSV:"CSVのエクスポート",OUTPUT_PANEL_TOTAL:"件数",OUTPUT_PANEL_CLOSE_CHILD_REL:"子リレーションを閉じる",OUTPUT_TABLE_FAILED_FETCH_NEXT:"次ページの取得に失敗しました。",QUERY_EDITOR_PANEL_QUERY:"実行",QUERY_EDITOR_PANEL_QUERY_ALL:"実行（削除レコード含む）",QUERY_EDITOR_PANEL_QUERY_ALL_TITLE:"削除されたレコードも含めて取得します",QUERY_EDITOR_PANEL_FORMAT_SOQL:"SOQLのフォーマット",QUERY_EDITOR_PANEL_INPUT_SOQL:"SOQLを入力するか左のオブジェクト一覧から選択してください。",QUERY_LIST_PANEL_RECENT_QUERIES:"最近実行したSOQL",RELATIONSHIPS_TREE_NO_MATCHING:"子リレーションが見つかりません。",RELATIONSHIPS_TREE_EXPAND_CHILD_REL:"子リレーションを開く",SOBJECTS_PANEL_FAILED_FETCH_SOBJECTS:"オブジェクト一覧の取得に失敗しました。",SOBJECTS_PANEL_SOBJECTS:"オブジェクト",SOBJECTS_PANEL_FILTER_SOBJECTS:"オブジェクトの絞り込み",SOBJECTS_PANEL_QUICK_FIND:"オブジェクトの検索",SOBJECTS_PANEL_NO_MATCHING:"オブジェクトがありません",SOBJECTS_PANEL_KEYWORD_CLEAR:"クリア",WELCOME_TITLE:"LWC SOQL Builderにようこそ！",WELCOME_DESCRIPTION:"LWC SOQL BuilderはLWC OSSで開発されたそQL実行ツールです。SOQLの入力補完、オブジェクト/項目一覧からのSOQLの構築、実行クエリの保存、CSVエクスポートなど便利な機能を備えています。",WELCOME_LOGIN_PRODUCTION:"本番組織にログイン",WELCOME_LOGIN_SANDBOX:"Sandbox組織にログイン",WELCOME_BACK_HOME:"ホームに戻る"}},ce=e=>class extends e{get i18n(){const e=window.navigator.language,t=e.replace(/_.*/,"");return Object.assign({},oe.en,oe[t],oe[e])}};class de extends(ce(i.LightningElement)){constructor(...e){super(...e),this.isLoggedIn=void 0,this._user=void 0,this._apiUsage=void 0}get userLabel(){return this._user?`${this._user.name}(${this._user.preferred_username})`:""}get apiUsage(){return this._apiUsage?`${this._apiUsage.used}/${this._apiUsage.limit}`:""}storeChange({ui:e}){this.isLoggedIn=e.isLoggedIn,this._user=e.user,this._apiUsage=e.apiUsage}logout(){F()}}Object(i.registerDecorators)(de,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["isLoggedIn","_user","_apiUsage"]});var pe=Object(i.registerComponent)(de,{tmpl:h});var ue=[function(e,t,s){return[s?[".slds-tree_container",t,",:host{width:100%;display:flex}"].join(""):[".slds-tree_container",t,",",e,"{width:100%;display:flex}"].join(""),".slds-tree_container",t,"{flex-direction:column}.slds-tree__group-header",t,"{padding:.5rem .5rem .5rem 1rem;font-size:1rem;font-weight:700}.sobjects-list",t,"{flex:1;position:relative;margin-top:.5rem}.slds-tabs_default__content",t,"{position:absolute;height:100%;left:0;right:0;padding:0}.left-panel-scrollable",t,"{position:absolute;height:100%;left:0;right:0;overflow-x:hidden;overflow-y:auto}"].join("")}];function he(e,t,s,r){const{c:l,d:a,h:n,b:o,k:c,i:p,gid:u}=e,{_m0:h,_m1:_,_m2:b}=r;return[t.isLoading?l("base-spinner",d,{key:0},[]):null,n("div",{classMap:{"slds-tree_container":!0},key:21},[n("div",{key:2},[n("h2",{classMap:{"slds-tree__group-header":!0,"slds-truncate":!0},key:1},[a(t.i18n.SOBJECTS_PANEL_SOBJECTS)])]),n("div",{classMap:{"slds-form-element":!0,"slds-p-horizontal_large":!0},key:13},[n("label",{classMap:{"slds-form-element__label":!0,"slds-assistive-text":!0},key:3},[a(t.i18n.SOBJECTS_PANEL_FILTER_SOBJECTS)]),n("div",{classMap:{"slds-form-element__control":!0,"slds-input-has-icon":!0,"slds-input-has-icon_left-right":!0},key:12},[n("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-search":!0},key:6},[n("svg",{classMap:{"slds-icon":!0,"slds-input__icon":!0,"slds-input__icon_left":!0,"slds-icon-text-default":!0},attrs:{"aria-hidden":"true"},key:5},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#search")},key:4},[])])]),n("input",{classMap:{"slds-input":!0},attrs:{type:"search",placeholder:t.i18n.SOBJECTS_PANEL_QUICK_FIND},props:{value:t.keyword},key:7,on:{keyup:h||(r._m0=o(t.setKeyword))}},[]),t.isDisplayClearButton?n("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0},attrs:{title:t.i18n.SOBJECTS_PANEL_KEYWORD_CLEAR},key:11,on:{click:_||(r._m1=o(t.handleClear))}},[n("svg",{classMap:{"slds-button__icon":!0,"slds-icon-text-light":!0},attrs:{"aria-hidden":"true"},key:9},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#clear")},key:8},[])]),n("span",{classMap:{"slds-assistive-text":!0},key:10},[a(t.i18n.SOBJECTS_PANEL_KEYWORD_CLEAR)])]):null])]),n("div",{classMap:{"sobjects-list":!0,"slds-border_top":!0},key:20},[t.isNoSObjects?n("div",{classMap:{"slds-p-around_small":!0},key:14},[a(t.i18n.SOBJECTS_PANEL_NO_MATCHING)]):null,t.sobjects?n("ul",{classMap:{"slds-tree":!0,"left-panel-scrollable":!0},attrs:{"aria-describedby":""+u("entity-header")},key:19},p(t.sobjects,(function(e){return e.queryable?n("li",{attrs:{"aria-level":"1",role:"treeitem"},key:c(18,e.name)},[n("div",{classMap:{"slds-tree__item":!0},key:17},[n("span",{classMap:{"slds-has-flexi-truncate":!0},key:16},[n("a",{classMap:{"slds-tree__item-label":!0,"slds-truncate":!0},attrs:{title:e.itemLabel,"data-name":e.name},key:15,on:{click:b||(r._m2=o(t.selectSObject))}},[a(e.itemLabel)])])])]):null}))):null])])]}var _e=Object(i.registerTemplate)(he);he.stylesheets=[],ue&&he.stylesheets.push.apply(he.stylesheets,ue),he.stylesheetTokens={hostAttribute:"cmp-sobjectsPanel-_sobjectsPanel-host",shadowAttribute:"cmp-sobjectsPanel-_sobjectsPanel"};var be=[function(e,t,s){return[".slds-notify__content",t,"{width:500px;max-width:100%}.error-details",t,"{max-height:300px}.slds-form-element__label",t,"{color:#fff}"].join("")}];function me(e,t,s,r){const{t:l,h:a,d:n,k:o,i:c,gid:d,b:p}=e,{_m0:u,_m1:h}=r;return[a("div",{classMap:{"slds-notify_container":!0},key:23},[a("div",{classMap:{"slds-notify":!0,"slds-notify_toast":!0,"slds-theme_error":!0},attrs:{role:"status"},key:22},[a("span",{classMap:{"slds-assistive-text":!0},key:0},[l("error")]),a("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-error":!0,"slds-m-right_small":!0,"slds-no-flex":!0,"slds-align-top":!0},key:3},[a("svg",{classMap:{"slds-icon":!0,"slds-icon_small":!0},attrs:{"aria-hidden":"true"},key:2},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#error")},key:1},[])])]),a("div",{classMap:{"slds-notify__content":!0},key:16},[a("h2",{classMap:{"slds-text-heading_small":!0},key:4},[n(t.message)]),t.errorMessages.length?a("ul",{classMap:{"slds-list_dotted":!0,"slds-p-top_small":!0},key:6},c(t.errorMessages,(function(e){return a("li",{key:o(5,e)},[n(e)])}))):null,a("div",{classMap:{"slds-p-vertical_x-small":!0},key:14},[a("div",{classMap:{"slds-form-element":!0},key:13},[a("div",{classMap:{"slds-form-element__control":!0},key:12},[a("div",{classMap:{"slds-checkbox":!0},key:11},[a("input",{attrs:{type:"checkbox",name:"options",id:d("checkbox-view-details")},props:{value:"true",checked:t.viewDetails},key:7,on:{change:u||(r._m0=p(t.handleCheckboxChange))}},[]),a("label",{classMap:{"slds-checkbox__label":!0},attrs:{for:""+d("checkbox-view-details")},key:10},[a("span",{classMap:{"slds-checkbox_faux":!0},key:8},[]),a("span",{classMap:{"slds-form-element__label":!0},key:9},[l("Show Details")])])])])])]),t.viewDetails?a("pre",{classMap:{"error-details":!0,"slds-box":!0,"slds-box_x-small":!0,"slds-theme_default":!0},key:15},[n(t.errorDetails)]):null]),a("div",{classMap:{"slds-notify__close":!0},key:21},[a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-button_icon-inverse":!0},attrs:{title:"Close"},key:20,on:{click:h||(r._m1=p(t.handleClose))}},[a("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_large":!0},attrs:{"aria-hidden":"true"},key:18},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#close")},key:17},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:19},[l("Close")])])])])])]}var ye=Object(i.registerTemplate)(me);function Ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(s),!0).forEach((function(t){ge(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ge(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}me.stylesheets=[],be&&me.stylesheets.push.apply(me.stylesheets,be),me.stylesheetTokens={hostAttribute:"base-toast-_toast-host",shadowAttribute:"base-toast-_toast"};class Oe extends i.LightningElement{constructor(...e){super(...e),this.message=void 0,this.errors=void 0,this.viewDetails=!1}get errorMessages(){return e=this.errors,Array.isArray(e)||(e=[e]),e.filter(e=>!!e).map(e=>"string"==typeof e.message?e.message:e.statusText).reduce((e,t)=>e.concat(t),[]).filter(e=>!!e);var e}get errorDetails(){return e=this.errors,JSON.stringify(e,(function(e,t){return t instanceof Error?fe(fe({},t),{},{name:t.name,message:t.message,stack:t.stack}):t}),2);var e}handleCheckboxChange(e){this.viewDetails=e.target.checked}handleClose(){this.template.host.remove()}}Object(i.registerDecorators)(Oe,{publicProps:{message:{config:0},errors:{config:0}},fields:["viewDetails"]});var ve=Object(i.registerComponent)(Oe,{tmpl:ye});function Le(e){window.dispatchEvent(new CustomEvent("show-toast",{detail:e}))}function Se(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function ke(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(s),!0).forEach((function(t){we(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Se(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function we(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class je extends(ce(i.LightningElement)){constructor(...e){super(...e),this.keyword="",this.sobjects=void 0,this.isLoading=void 0,this._rawSObjects=void 0}get isNoSObjects(){return!(this.isLoading||this.sobjects&&this.sobjects.length)}get isDisplayClearButton(){return""!==this.keyword}storeChange({sobjects:e}){this._rawSObjects||(this.isLoading=e.isFetching,e.data?(this._rawSObjects=e.data.sobjects.map(e=>ke(ke({},e),{},{itemLabel:`${e.name} / ${e.label}`})),this.sobjects=this._rawSObjects):e.error&&(console.error(e.error),Le({message:this.i18n.SOBJECTS_PANEL_FAILED_FETCH_SOBJECTS,errors:e.error}),se.dispatch({type:"CLEAR_SOBJECTS_ERROR"})))}setKeyword(e){this.keyword=e.target.value,this.filterSObjects(this.keyword)}filterSObjects(e){if(e){const t=T(e),s=new RegExp(t,"i");this.sobjects=this._rawSObjects.filter(e=>s.test(`${e.name} ${e.label}`))}else this.sobjects=this._rawSObjects}selectSObject(e){const t=e.target.dataset.name;se.dispatch(function(e){return{type:"SELECT_SOBJECT",payload:{sObjectName:e}}}(t))}handleClear(){this.keyword="",this.filterSObjects(this.keyword)}}Object(i.registerDecorators)(je,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["keyword","sobjects","isLoading","_rawSObjects"]});var Ce=Object(i.registerComponent)(je,{tmpl:_e});var Re=[function(e,t,s){return[s?[".slds-tree_container",t,",:host{width:100%;display:flex}"].join(""):[".slds-tree_container",t,",",e,"{width:100%;display:flex}"].join(""),".slds-tree_container",t,"{flex-direction:column}.slds-tree__group-header",t,"{padding:.5rem;font-size:1rem;font-weight:700}.slds-tabs_default",t,"{display:flex;flex-direction:column;height:100%}.slds-tabs_default__item[aria-selected=true]",t,"{color:#080707}.slds-tabs_default__item[aria-selected=true]",t," .slds-tabs_default__link",t,"{font-weight:700}.slds-tabs_default__item[aria-selected=true]",t,":after{background-color:#1589ee;height:.1875rem}.slds-tabs_default__content",t,"{flex:1;position:relative;padding:0}.left-panel-scrollable",t,"{position:absolute;height:100%;left:0;right:0;overflow-x:hidden;overflow-y:auto}.slds-panel__header",t,"{padding:0 .75rem;border-top:1px solid #dddbda}.slds-panel__header-title",t,"{font-size:100%;font-weight:700;line-height:2.5rem;height:2.5rem}.dropdown-menu",t,"{position:absolute;top:0;right:7px;height:2.5rem;display:flex;align-items:center}"].join("")}];function Te(e,t,s,r){const{h:l,d:a,b:n,s:o}=e,{_m0:c,_m1:d,_m2:p}=r;return[l("button",{classMap:{"slds-button":!0,"slds-button_icon":!0},attrs:{"aria-haspopup":"true",title:t.alternativeText},key:3,on:{click:c||(r._m0=n(t.toggleMenu)),blur:d||(r._m1=n(t.handleBlur))}},[l("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:1},[l("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#down")},key:0},[])]),l("span",{classMap:{"slds-assistive-text":!0},key:2},[a(t.alternativeText)])]),l("div",{classMap:{"slds-dropdown":!0,"slds-dropdown_right":!0},key:6},[l("ul",{classMap:{"slds-dropdown__list":!0},attrs:{role:"menu","aria-label":t.alternativeText},key:5,on:{privateselect:p||(r._m2=n(t.handleMenuItemPrivateSelect))}},[o("",{key:4},[],s)])])]}var Ae=Object(i.registerTemplate)(Te);Te.slots=[""],Te.stylesheets=[],a.a&&Te.stylesheets.push.apply(Te.stylesheets,a.a),Te.stylesheetTokens={hostAttribute:"base-menu-_menu-host",shadowAttribute:"base-menu-_menu"};class Ie extends i.LightningElement{constructor(...e){super(...e),this.alternativeText=void 0,this._closeMenuTimer=void 0}connectedCallback(){this.classList.add("slds-dropdown-trigger","slds-dropdown-trigger_click")}toggleMenu(){this.classList.toggle("slds-is-open")}handleBlur(){this._closeMenuTimer=setTimeout(()=>this._closeMenu(),200)}handleMenuItemPrivateSelect(e){clearTimeout(this._closeMenuTimer),e.stopPropagation(),this.dispatchEvent(new CustomEvent("select",{cancelable:!0,detail:{value:e.detail.value}})),this._closeMenu()}_closeMenu(){this.classList.remove("slds-is-open")}}Object(i.registerDecorators)(Ie,{publicProps:{alternativeText:{config:0}},fields:["_closeMenuTimer"]});var Pe=Object(i.registerComponent)(Ie,{tmpl:Ae});function xe(e,t,s,r){const{fid:l,h:a,d:n,b:o}=e,{_m0:c}=r;return[a("a",{attrs:{href:"javascript:void(0);",role:"menuitem",tabindex:"-1"},key:3,on:{click:c||(r._m0=o(t.handleClick))}},[a("span",{classMap:{"slds-truncate":!0},attrs:{title:"Select All Fields"},key:2},[t.iconPath?a("svg",{classMap:{"slds-icon":!0,"slds-icon_x-small":!0,"slds-icon-text-default":!0,"slds-m-right_x-small":!0},attrs:{"aria-hidden":"true"},key:1},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href",l(t.iconPath))},key:0},[])]):null,n(t.label)])])]}var Me=Object(i.registerTemplate)(xe);xe.stylesheets=[],a.a&&xe.stylesheets.push.apply(xe.stylesheets,a.a),xe.stylesheetTokens={hostAttribute:"base-menuItem-_menuItem-host",shadowAttribute:"base-menuItem-_menuItem"};class De extends i.LightningElement{constructor(...e){super(...e),this.iconName=void 0,this.label=void 0,this.value=void 0}get iconPath(){if(!this.iconName)return null;const e=this.iconName.split(":");return`./resources/slds/icons/${e[0]}-sprite/svg/symbols.svg#${e[1]}`}connectedCallback(){this.classList.add("slds-dropdown__item"),this.setAttribute("role","presentation")}handleClick(e){e.preventDefault(),this.dispatchEvent(new CustomEvent("privateselect",{bubbles:!0,cancelable:!0,detail:{value:this.value}}))}}Object(i.registerDecorators)(De,{publicProps:{iconName:{config:0},label:{config:0},value:{config:0}}});var Ne=Object(i.registerComponent)(De,{tmpl:Me});var Fe=[function(e,t,s){return[".slds-tree__item",t,"{padding-top:.2rem;padding-bottom:.2rem}.slds-tree__item",t," button[aria-hidden=true]",t,"{visibility:hidden}.slds-tree__item",t," .slds-text-color_error",t,"{padding-left:2rem}.field-details",t,"{font-size:.5rem;line-height:1;color:#919191}"].join("")}];function Ue(e,t,s,r){const{c:l,h:a,d:n,b:o,t:c,k:p,i:u}=e,{_m0:h,_m1:_}=r;return[t.isLoading?a("div",{classMap:{"slds-is-relative":!0},styleMap:{height:"2rem"},key:1},[l("base-spinner",d,{props:{size:"x-small"},key:0},[])]):null,t.isLoading?null:a("div",{key:18},[t.isNoFields?a("div",{classMap:{"slds-p-around_small":!0},key:2},[n(t.i18n.FIELDS_TREE_NO_MATCHING_FIELD)]):null,t.isNoFields?null:a("ul",{classMap:{"slds-tree":!0},key:17},u(t.fields,(function(e){return a("li",{attrs:{"aria-level":t.level,"aria-selected":e.isActive,"aria-expanded":e.isExpanded,role:"treeitem"},key:p(16,e.name)},[a("div",{classMap:{"slds-tree__item":!0},key:10},[a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-m-right_x-small":!0},attrs:{"aria-hidden":e.isNotReference,tabindex:"-1",title:"Expand Reference Field","data-field":e.name},key:6,on:{click:h||(r._m0=o(t.toggleReferenceField))}},[a("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_small":!0},attrs:{"aria-hidden":"true"},key:4},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#chevronright")},key:3},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:5},[n(t.i18n.FIELDS_TREE_EXPAND_REFERENCE)])]),a("span",{classMap:{"slds-has-flexi-truncate":!0},attrs:{"data-name":e.name},key:9,on:{click:_||(r._m1=o(t.selectField))}},[a("a",{classMap:{"slds-tree__item-label":!0,"slds-truncate":!0},attrs:{title:e.name},key:7},[c(" "),n(e.name),c(" ")]),a("div",{classMap:{"field-details":!0},attrs:{title:e.details},key:8},[n(e.details)])])]),e.isExpanded&&t.isMaxLevel?a("ul",{classMap:{"slds-tree":!0},key:14},[a("li",{attrs:{"aria-level":t.level},key:13},[a("div",{classMap:{"slds-tree__item":!0},key:12},[a("div",{classMap:{"slds-text-color_error":!0},key:11},[n(t.i18n.FIELDS_TREE_FILE_LEVELS_MESSAGE)])])])]):null,e.isExpanded?t.isMaxLevel?null:e.relationshipPath?l("cmp-fields-tree",$e,{props:{sobject:e.relationshipSObjectName,relationship:e.relationshipPath,rootlevel:t.rootlevel,childrelation:t.childrelation},key:15},[]):null:null])})))])]}var Qe=Object(i.registerTemplate)(Ue);function qe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Be(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(s),!0).forEach((function(t){He(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function He(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ue.stylesheets=[],Fe&&Ue.stylesheets.push.apply(Ue.stylesheets,Fe),Ue.stylesheetTokens={hostAttribute:"cmp-fieldsTree-_fieldsTree-host",shadowAttribute:"cmp-fieldsTree-_fieldsTree"};class Je extends(ce(i.LightningElement)){constructor(...e){super(...e),this.sobject=void 0,this.relationship=void 0,this.childrelation=void 0,this.rootlevel=1,this.sobjectMeta=void 0,this.fields=[],this.isLoading=void 0,this._keyword=void 0,this._rawFields=[],this._expandedFieldNames={}}get keyword(){return this._keyword}set keyword(e){this._keyword!==e&&(this._keyword=e,this._filterFields())}get level(){return this.relationship?this.relationship.split(".").length+this.rootLevelNum:this.rootLevelNum}get isMaxLevel(){return this.level>4+this.rootLevelNum}get rootLevelNum(){return parseInt(this.rootlevel,10)}get isNoFields(){return!this.fields||!this.fields.length}storeChange({sobject:e,ui:t}){const s=e[this.sobject];s&&(this.isLoading=s.isFetching,s.data&&(this.sobjectMeta=s.data),this._updateFields(t.query,t.sort))}connectedCallback(){se.dispatch(ne(this.sobject))}selectField(e){const t=e.currentTarget.dataset.name;se.dispatch(function(e,t,s){return{type:"TOGGLE_FIELD",payload:{fieldName:e,relationships:t,childRelationship:s}}}(t,this.relationship,this.childrelation))}toggleReferenceField(e){const t=e.target.dataset.field;this._expandedFieldNames[t]=!this._expandedFieldNames[t],this._filterFields()}_updateFields(e,t){if(!this.sobjectMeta)return;const s=this._getSelectedFields(e);this._rawFields=this.sobjectMeta.fields.map(e=>Be(Be({},e),{},{details:`${e.type.toUpperCase()} / ${e.label}`,isNotReference:"reference"!==e.type,isActive:s.includes(this._getRawFieldName(e)),isExpanded:!1},this._generateRelationshipProperties(e))),this._sortFields(t),this._filterFields()}_getSelectedFields(e){if(!e)return[];if(this.childrelation){const t=e.fields.find(e=>{return"FieldSubquery"===e.type&&(t=e.subquery.relationshipName,s=this.childrelation,H(t)===H(s));var t,s});return t?this._getFlattenedFields(t):[]}return this._getFlattenedFields(e)}_getRawFieldName(e){let t;return t=this.relationship?`${this.relationship}.${e.name}`:e.name,H(t)}_getRelationshipPath(e){return this.relationship?`${this.relationship}.${e.relationshipName}`:e.relationshipName}_generateRelationshipProperties(e){return{relationshipSObjectName:e.referenceTo&&e.referenceTo.length>0?e.referenceTo[0]:void 0,relationshipPath:this._getRelationshipPath(e)}}_filterFields(){let e;if(1===this.level&&this.keyword){const t=T(this.keyword),s=new RegExp(t,"i");e=this._rawFields.filter(e=>s.test(`${e.name} ${e.label}`))}else e=this._rawFields;this.fields=e.map(e=>Be(Be({},e),{},{isExpanded:!!this._expandedFieldNames[e.name]}))}_getFlattenedFields(e){return Object(w.c)(e).map(e=>H(e))}_sortFields(e){if(e){const t={ASC:1,DESC:-1}[e.order];this._rawFields.sort((e,s)=>(e.name.toLowerCase()>s.name.toLowerCase()?1:-1)*t)}}}Object(i.registerDecorators)(Je,{publicProps:{sobject:{config:0},relationship:{config:0},childrelation:{config:0},rootlevel:{config:0},keyword:{config:3}},wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["sobjectMeta","fields","isLoading","_keyword","_rawFields","_expandedFieldNames"]});var $e=Object(i.registerComponent)(Je,{tmpl:Qe});var Ye=[function(e,t,s){return[".slds-tree__item",t,"{padding-top:.2rem;padding-bottom:.2rem}.relationship-details",t,"{font-size:.5rem;line-height:1;color:#919191}"].join("")}];function Ve(e,t,s,r){const{d:l,h:a,b:n,c:o,k:c,i:d}=e,{_m0:p,_m1:u}=r;return[t.isNoRelationships?a("div",{classMap:{"slds-p-around_small":!0},key:0},[l(t.i18n.RELATIONSHIPS_TREE_NO_MATCHING)]):null,t.isNoRelationships?null:a("ul",{classMap:{"slds-tree":!0},key:11},d(t.relationships,(function(e){return e.relationshipName?a("li",{attrs:{"aria-level":"1","aria-selected":e.isActive,"aria-expanded":e.isExpanded,role:"treeitem"},key:c(10,e.relationshipName)},[a("div",{classMap:{"slds-tree__item":!0},key:8},[a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-m-right_x-small":!0},attrs:{"aria-hidden":"false",tabindex:"-1",title:t.i18n.RELATIONSHIPS_TREE_EXPAND_CHILD_REL,"data-name":e.relationshipName},key:4,on:{click:p||(r._m0=n(t.toggleChildRelationship))}},[a("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_small":!0},attrs:{"aria-hidden":"true"},key:2},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#chevronright")},key:1},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:3},[l(t.i18n.RELATIONSHIPS_TREE_EXPAND_CHILD_REL)])]),a("span",{classMap:{"slds-has-flexi-truncate":!0},attrs:{"data-name":e.relationshipName},key:7,on:{click:u||(r._m1=n(t.selectRelationship))}},[a("a",{classMap:{"slds-tree__item-label":!0,"slds-truncate":!0},attrs:{title:e.relationshipName},key:5},[l(e.relationshipName)]),a("div",{classMap:{"relationship-details":!0},attrs:{title:e.details},key:6},[l(e.details)])])]),e.isExpanded?o("cmp-fields-tree",$e,{props:{sobject:e.childSObject,childrelation:e.relationshipName,rootlevel:"2"},key:9},[]):null]):null})))]}var Ge=Object(i.registerTemplate)(Ve);function We(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function ze(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?We(Object(s),!0).forEach((function(t){Ke(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):We(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ke(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ve.stylesheets=[],Ye&&Ve.stylesheets.push.apply(Ve.stylesheets,Ye),Ve.stylesheetTokens={hostAttribute:"cmp-relationshipsTree-_relationshipsTree-host",shadowAttribute:"cmp-relationshipsTree-_relationshipsTree"};class Xe extends(ce(i.LightningElement)){constructor(...e){super(...e),this.sobject=void 0,this.sobjectMeta=void 0,this.relationships=[],this._keyword=void 0,this._rawRelationships=[],this._expandedRelationshipNames={},this._sobjectLabelMap=void 0}get keyword(){return this._keyword}set keyword(e){this._keyword!==e&&(this._keyword=e,this._filterRelationships())}get isNoRelationships(){return!this.relationships||!this.relationships.length}storeChange({sobjects:e,sobject:t,ui:s}){!this._sobjectLabelMap&&e.data&&(this._sobjectLabelMap=this._getSObjectLabelMap(e.data));const i=t[this.sobject];i&&(i.data&&(this.sobjectMeta=i.data),this._updateRelationships(s.query))}selectRelationship(e){const t=e.currentTarget.dataset.name;se.dispatch(function(e){return{type:"TOGGLE_RELATIONSHIP",payload:{relationshipName:e}}}(t))}toggleChildRelationship(e){const t=e.target.dataset.name;this._expandedRelationshipNames[t]=!this._expandedRelationshipNames[t],this._filterRelationships()}_getSObjectLabelMap(e){return e.sobjects.reduce((e,t)=>ze(ze({},e),{},{[t.name]:t.label}),{})}_updateRelationships(e){if(!this.sobjectMeta)return;const t=e?this._getFlattenedFields(e):[];this._rawRelationships=this.sobjectMeta.childRelationships.map(e=>ze(ze({},e),{},{itemLabel:`${e.relationshipName} / ${e.childSObject}`,details:this._getRelationDetails(e),isActive:t.includes(H(e.relationshipName)),isExpanded:!1})),this._filterRelationships()}_getRelationDetails(e){return`${e.childSObject} / ${this._sobjectLabelMap[e.childSObject]}`}_filterRelationships(){let e;if(this.keyword){const t=T(this.keyword),s=new RegExp(t,"i");e=this._rawRelationships.filter(e=>s.test(`${e.relationshipName} ${e.childSObject}`))}else e=this._rawRelationships;this.relationships=e.map(e=>ze(ze({},e),{},{isExpanded:!!this._expandedRelationshipNames[e.relationshipName]}))}_getFlattenedFields(e){return Object(w.c)(e).map(e=>H(e))}}Object(i.registerDecorators)(Xe,{publicProps:{sobject:{config:0},keyword:{config:3}},wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["sobjectMeta","relationships","_keyword","_rawRelationships","_expandedRelationshipNames","_sobjectLabelMap"]});var Ze=Object(i.registerComponent)(Xe,{tmpl:Ge});function et(e,t,s,r){const{c:l,h:a,d:n,b:o,t:c,k:p,i:u}=e,{_m0:h,_m1:_,_m2:b,_m3:m,_m4:y}=r;return[t.isLoading?l("base-spinner",d,{key:0},[]):null,t.sobjectMeta?a("div",{classMap:{"slds-tree_container":!0},key:35},[a("div",{classMap:{"slds-p-left_small":!0},key:7},[a("div",{classMap:{"slds-grid":!0},key:6},[a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0},attrs:{title:"Back"},key:4,on:{click:h||(r._m0=o(t.deselectSObject))}},[a("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:2},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#back")},key:1},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:3},[n(t.i18n.FIELDS_PANEL_BACK)])]),a("h2",{classMap:{"slds-tree__group-header":!0,"slds-truncate":!0},key:5},[n(t.sobjectMeta.name),c(" / "),n(t.sobjectMeta.label)])])]),a("div",{classMap:{"slds-form-element":!0,"slds-p-horizontal_large":!0},key:18},[a("label",{classMap:{"slds-form-element__label":!0,"slds-assistive-text":!0},key:8},[n(t.i18n.FIELDS_PANEL_FILTER_FIELDS)]),a("div",{classMap:{"slds-form-element__control":!0,"slds-input-has-icon":!0,"slds-input-has-icon_left-right":!0},key:17},[a("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-search":!0},key:11},[a("svg",{classMap:{"slds-icon":!0,"slds-input__icon":!0,"slds-input__icon_left":!0,"slds-icon-text-default":!0},attrs:{"aria-hidden":"true"},key:10},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#search")},key:9},[])])]),a("input",{classMap:{"slds-input":!0},attrs:{type:"search",placeholder:t.i18n.FIELDS_PANEL_QUICK_FIND},props:{value:t.keyword},key:12,on:{keyup:_||(r._m1=o(t.setKeyword))}},[]),t.isDisplayClearButton?a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0},attrs:{title:t.i18n.FIELDS_PANEL_KEYWORD_CLEAR},key:16,on:{click:b||(r._m2=o(t.handleClear))}},[a("svg",{classMap:{"slds-button__icon":!0,"slds-icon-text-light":!0},attrs:{"aria-hidden":"true"},key:14},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#clear")},key:13},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:15},[n(t.i18n.FIELDS_PANEL_KEYWORD_CLEAR)])]):null])]),a("div",{classMap:{"slds-tabs_default":!0,"slds-is-relative":!0},key:34},[a("ul",{classMap:{"slds-tabs_default__nav":!0},attrs:{role:"tablist"},key:21},u(t.tabs,(function(e){return a("li",{classMap:{"slds-tabs_default__item":!0},attrs:{"aria-selected":e.isActive,title:e.label},key:p(20,e.id)},[a("a",{classMap:{"slds-tabs_default__link":!0},attrs:{role:"tab",tabindex:"-1","data-id":e.id},key:19,on:{click:m||(r._m3=o(t.selectTab))}},[n(e.label)])])}))),t.isFieldsActive?a("div",{classMap:{"dropdown-menu":!0},key:27},[l("base-menu",Pe,{props:{alternativeText:t.i18n.FIELDS_PANEL_SHOW_MENU},key:26,on:{select:y||(r._m4=o(t.handleMenuSelect))}},[l("base-menu-item",Ne,{props:{iconName:"utility:multi_select_checkbox",label:t.i18n.FIELDS_PANEL_SELECT_ALL_FIELDS,value:"select_all"},key:22},[]),l("base-menu-item",Ne,{props:{iconName:"utility:clear",label:t.i18n.FIELDS_PANEL_CLEAR_ALL_FIELDS,value:"clear_all"},key:23},[]),l("base-menu-item",Ne,{props:{iconName:"utility:arrowdown",label:t.i18n.FIELDS_PANEL_SORT_ASC,value:"sort_asc"},key:24},[]),l("base-menu-item",Ne,{props:{iconName:"utility:arrowup",label:t.i18n.FIELDS_PANEL_SORT_DESC,value:"sort_desc"},key:25},[])])]):null,t.isFieldsActive?a("div",{classMap:{"slds-tabs_default__content":!0},attrs:{role:"tabpanel"},key:30},[t.sobjectMeta?a("div",{classMap:{"left-panel-scrollable":!0},key:29},[l("cmp-fields-tree",$e,{props:{sobject:t.sobjectMeta.name,keyword:t.keyword},key:28},[])]):null]):null,t.isRelationshipsActive?a("div",{classMap:{"slds-tabs_default__content":!0},attrs:{role:"tabpanel"},key:33},[t.sobjectMeta?a("div",{classMap:{"left-panel-scrollable":!0},key:32},[l("cmp-relationships-tree",Ze,{props:{sobject:t.sobjectMeta.name,keyword:t.keyword},key:31},[])]):null]):null])]):null]}var tt=Object(i.registerTemplate)(et);function st(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function it(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?st(Object(s),!0).forEach((function(t){rt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):st(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}et.stylesheets=[],Re&&et.stylesheets.push.apply(et.stylesheets,Re),et.stylesheetTokens={hostAttribute:"cmp-fieldsPanel-_fieldsPanel-host",shadowAttribute:"cmp-fieldsPanel-_fieldsPanel"};class lt extends(ce(i.LightningElement)){constructor(...e){super(...e),this.tabs=[{id:"tab-fields",label:this.i18n.FIELDS_PANEL_FIELDS,isActive:!0},{id:"tab-relationships",label:this.i18n.FIELDS_PANEL_CHILD_REL,isActive:!1}],this.sobjectMeta=void 0,this.keyword="",this.isLoading=void 0,this._selectedSObject=void 0}storeChange({sobjects:e,sobject:t,ui:s}){const{selectedSObject:i}=s;if(!i)return;const r=H(i);if(e&&!e.data.sobjects.find(e=>e.name===r))return;r!==this._selectedSObject&&(this._selectedSObject=r,se.dispatch(ne(this._selectedSObject)));const l=t[this._selectedSObject];l&&(this.isLoading=l.isFetching,l.data?this.sobjectMeta=l.data:l.error&&(console.error(l.error),Le({message:this.i18n.FIELDS_PANEL_FAILED_DESCRIBE_OBJ,errors:l.error}),se.dispatch({type:"CLEAR_SOBJECT_ERROR",payload:{sObjectName:this._selectedSObject}})))}get isFieldsActive(){return!!this.tabs.find(e=>"tab-fields"===e.id&&e.isActive)}get isRelationshipsActive(){return!!this.tabs.find(e=>"tab-relationships"===e.id&&e.isActive)}deselectSObject(){se.dispatch({type:"DESELECT_SOBJECT"})}selectTab(e){const t=e.target.dataset.id;this.tabs=this.tabs.map(e=>it(it({},e),{},{isActive:e.id===t}))}setKeyword(e){this.keyword=e.target.value}handleMenuSelect(e){switch(e.detail.value){case"select_all":se.dispatch({type:"SELECT_ALL_FIELDS",payload:{sObjectMeta:this.sobjectMeta}});break;case"clear_all":se.dispatch({type:"CLEAR_ALL_FIELDS"});break;case"sort_asc":se.dispatch(le(j.ASC));break;case"sort_desc":se.dispatch(le(j.DESC))}}get isDisplayClearButton(){return""!==this.keyword}handleClear(){this.keyword=""}}Object(i.registerDecorators)(lt,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["tabs","sobjectMeta","keyword","isLoading","_selectedSObject"]});var at=Object(i.registerComponent)(lt,{tmpl:tt});var nt=[function(e,t,s){return[s?":host{flex:1;display:flex;flex-direction:column}":[e,"{flex:1;display:flex;flex-direction:column}"].join(""),".soql-editor",t,"{position:relative;flex:1;display:flex}.soql-editor",t," textarea",t,"{flex:1}.completion-popover",t,"{position:absolute;width:300px;max-height:100%;overflow:auto}.slds-listbox__option[aria-selected=true]",t,"{background:rgba(21,137,238,.1);box-shadow:inset .25rem 0 0 #1589ee}"].join("")}];function ot(e,t,s,r){const{d:l,b:a,h:n,k:o,i:c}=e,{_m0:d,_m1:p,_m2:u,_m3:h,_m4:_,_m5:b,_m6:m}=r;return[n("div",{classMap:{"slds-p-around_small":!0},key:3},[n("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:0,on:{click:d||(r._m0=a(t.runQuery))}},[l(t.i18n.QUERY_EDITOR_PANEL_QUERY)]),n("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},attrs:{title:t.i18n.QUERY_EDITOR_PANEL_QUERY_ALL_TITLE},key:1,on:{click:p||(r._m1=a(t.runQueryAll))}},[l(t.i18n.QUERY_EDITOR_PANEL_QUERY_ALL)]),n("button",{classMap:{"slds-button":!0,"slds-button_neutral":!0},key:2,on:{click:u||(r._m2=a(t.formatQuery))}},[l(t.i18n.QUERY_EDITOR_PANEL_FORMAT_SOQL)])]),n("div",{classMap:{"soql-editor":!0,"slds-m-horizontal_small":!0,"slds-m-bottom_small":!0},key:17},[n("textarea",{classMap:{"slds-textarea":!0,"soql-input":!0},attrs:{placeholder:t.i18n.QUERY_EDITOR_PANEL_INPUT_SOQL},key:4,on:{keydown:h||(r._m3=a(t.handleKeydownSoql)),keyup:_||(r._m4=a(t.handleKeyupSoql)),blur:b||(r._m5=a(t.handleBlurSoql))}},[]),t.isCompletionVisible?n("div",{classMap:{"completion-popover":!0,"slds-popover":!0},style:t.completionStyle,key:16},[n("ul",{classMap:{"slds-listbox":!0,"slds-listbox_vertical":!0},attrs:{role:"presentation"},key:15},c(t.completionItems,(function(e){return n("li",{classMap:{"slds-listbox__item":!0},attrs:{role:"presentation"},key:o(14,e.key)},[n("div",{classMap:{"slds-media":!0,"slds-listbox__option":!0,"slds-listbox__option_plain":!0,"slds-media_small":!0},attrs:{"aria-selected":e.isActive,role:"option"},key:13},[e.isSyntax?null:n("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-text":!0},key:7},[n("svg",{classMap:{"slds-icon":!0,"slds-icon_x-small":!0,"slds-input__icon_left":!0,"slds-icon-text-default":!0},attrs:{"aria-hidden":"true"},key:6},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#text")},key:5},[])])]),e.isSyntax?n("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-display_text":!0},key:10},[n("svg",{classMap:{"slds-icon":!0,"slds-icon_x-small":!0,"slds-input__icon_left":!0,"slds-icon-text-default":!0},attrs:{"aria-hidden":"true"},key:9},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#display_text")},key:8},[])])]):null,n("span",{classMap:{"slds-media__body":!0,"slds-m-left_x-small":!0},key:12},[n("span",{classMap:{"slds-truncate":!0},attrs:{title:e.itemLabel,"data-key":e.key},key:11,on:{click:m||(r._m6=a(t.insertItem))}},[l(e.itemLabel)])])])])})))]):null])]}var ct=Object(i.registerTemplate)(ot);ot.stylesheets=[],nt&&ot.stylesheets.push.apply(ot.stylesheets,nt),ot.stylesheetTokens={hostAttribute:"cmp-queryEditorPanel-_queryEditorPanel-host",shadowAttribute:"cmp-queryEditorPanel-_queryEditorPanel"};var dt=s(104),pt=s.n(dt);function ut(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function ht(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(s),!0).forEach((function(t){_t(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ut(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bt=["SELECT","FROM","USING SCOPE","WHERE","AND","OR","LIKE","IN","GROUP BY","HAVING","ORDER BY","ASC","DESC","NULLS FIRST","NULLS LAST","LIMIT","OFFSET"];class mt extends(ce(i.LightningElement)){constructor(...e){super(...e),this.isCompletionVisible=void 0,this.completionStyle=void 0,this.completionItems=void 0,this._sobjectMeta=void 0,this._selectionStart=void 0,this._soql=void 0}get soql(){return this._soql}set soql(e){this._soql=e;const t=this.template.querySelector(".soql-input");t&&(t.value=e)}storeChange({sobject:e,ui:t}){const{query:s,soql:i}=t;if(e&&s){const t=e[H(s.sObject)];t&&(this._sobjectMeta=t.data)}i!==this.soql&&(this.soql=i)}runQuery(){this._runQuery()}runQueryAll(){this._runQuery(!0)}formatQuery(){se.dispatch({type:"FORMAT_SOQL"})}insertItem(e){const t=e.target.dataset.key;this._closeCompletionTimer&&clearTimeout(this._closeCompletionTimer);const s=this.completionItems.find(e=>e.key===t),i=this.template.querySelector(".soql-input");this._insertItem(i,s)}handleKeyupSoql(e){const{value:t}=e.target;this._soql!==t&&se.dispatch(re(t)),this._sobjectMeta&&(this.isCompletionVisible?this._handleCompletion(e):this._openCompletion(e))}handleKeydownSoql(e){const{key:t,isComposing:s}=e;if(this.isCompletionVisible){if(s)return;switch(t){case"ArrowDown":this._selectBellowItem(e);break;case"ArrowUp":this._selectAboveItem(e);break;case"Enter":this._insertItemByKeyboard(e)}}else s&&"Enter"===t&&this._openCompletion(e)}handleBlurSoql(){this._closeCompletionTimer=setTimeout(()=>this._closeCompletion(),100)}_runQuery(e){const t=this.template.querySelector(".soql-input");if(!t)return;const s=t.value;s&&se.dispatch(function(e,t){const s=t?"/queryAll":"/query";return async t=>{Q()&&(t({type:"REQUEST_QUERY"}),I.request({method:"GET",url:`${s}?q=${encodeURIComponent(e)}`,headers:q()}).then(s=>{t(function(e,t){return{type:"RECEIVE_QUERY_SUCCESS",payload:{data:e,soql:t}}}(s,e)),t({type:"UPDATE_API_LIMIT"})}).catch(e=>{t({type:"RECEIVE_QUERY_ERROR",payload:{error:e}})}))}}(s,e))}_openCompletion(e){const{target:t}=e;this._selectionStart=this._findSeparator(t.value.substring(0,t.selectionEnd))||t.selectionEnd,this._canOpenCompletion(e)&&this._searchCompletionItems(e)}_canOpenCompletion(e){const{key:t,altKey:s,ctrlKey:i,metaKey:r,isComposing:l}=e;return i&&" "===t||1===t.length&&![" ",",","."].includes(t)&&!s&&!i&&!r&&!l||l&&"Enter"===t}_findSeparator(e){const t=/[,. \n][^,. \n]*$/g.exec(e);return t&&t.index+1}_closeCompletion(){this.isCompletionVisible=!1}_setCompletionPosition(e){const{target:t}=e,s=pt()(t,t.selectionStart);this.completionStyle=`top:${s.top+s.height}px;left:${s.left}px;`}_searchCompletionItems(e){const{target:t}=e,s=T(t.value.substring(this._selectionStart,t.selectionEnd)),i=new RegExp(s,"i"),r=this._sobjectMeta.fields.filter(e=>i.test(`${e.name} ${e.label}`)).map(e=>ht(ht({},e),{},{key:e.name,itemLabel:`${e.name} / ${e.label}`,isActive:!1,isSyntax:!1})),l=bt.filter(e=>i.test(""+e)).map((e,t)=>({name:e,key:"syntax_"+t,itemLabel:e,isActive:!1,isSyntax:!0}));this.completionItems=[...l,...r],this.completionItems.length>0?(this.completionItems[0].isActive=!0,this._setCompletionPosition(e),this.isCompletionVisible=!0):this.isCompletionVisible=!1}_handleCompletion(e){const{key:t,altKey:s,ctrlKey:i,metaKey:r}=e;switch((s||i||r)&&this._closeCompletion(),t){case".":case",":case" ":case"Escape":case"ArrowLeft":case"ArrowRight":this._closeCompletion();break;case"Backspace":this._deleteKeyword(e);break;case"ArrowDown":case"ArrowUp":case"Enter":e.isComposing&&this._searchCompletionItems(e);break;default:this._searchCompletionItems(e)}}_deleteKeyword(e){this._searchCompletionItems(e),this._selectionStart===e.target.selectionStart&&this._closeCompletion()}_selectBellowItem(e){e.preventDefault();const t=this._getActiveItemIndex();t+1<this.completionItems.length&&(this.completionItems=this.completionItems.map((e,s)=>ht(ht({},e),{},{isActive:s===t+1})))}_selectAboveItem(e){e.preventDefault();const t=this._getActiveItemIndex();t>0&&(this.completionItems=this.completionItems.map((e,s)=>ht(ht({},e),{},{isActive:s===t-1})))}_getActiveItemIndex(){return this.completionItems.findIndex(e=>e.isActive)}_insertItemByKeyboard(e){e.preventDefault();const t=this.completionItems.find(e=>e.isActive),{target:s}=e;this._insertItem(s,t)}_insertItem(e,t){if(t){const s=e.value,i=s.substring(0,this._selectionStart),r=s.substring(e.selectionStart),l=$(t.name);this.soql=i+l+r;const a=this._selectionStart+l.length;e.focus(),e.setSelectionRange(a,a),se.dispatch(re(this.soql))}this._closeCompletion()}}Object(i.registerDecorators)(mt,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["isCompletionVisible","completionStyle","completionItems","_sobjectMeta","_selectionStart","_soql"]});var yt=Object(i.registerComponent)(mt,{tmpl:ct});var Et=[function(e,t,s){return[s?":host{width:100%}":[e,"{width:100%}"].join(""),".slds-tabs_default",t,"{height:100%;display:flex;flex-direction:column}.slds-tabs_default__content",t,"{padding:0;flex:1}.slds-scrollable",t,"{position:absolute;top:0;bottom:0;right:0;left:0}.recent-query-item",t,"{overflow:hidden}.recent-query-item:hover",t,"{background:#f3f2f2;cursor:pointer}"].join("")}];function ft(e,t,s,i){const{d:r,gid:l,h:a,k:n,b:o,i:c}=e,{_m0:d}=i;return[a("div",{classMap:{"slds-tabs_default":!0},key:6},[a("ul",{classMap:{"slds-tabs_default__nav":!0},attrs:{role:"tablist"},key:2},[a("li",{classMap:{"slds-tabs_default__item":!0,"slds-is-active":!0},attrs:{title:t.i18n.QUERY_LIST_PANEL_RECENT_QUERIES,role:"presentation"},key:1},[a("a",{classMap:{"slds-tabs_default__link":!0},attrs:{href:"javascript:void(0);",role:"tab",tabindex:"-1","aria-selected":"false","aria-controls":""+l("tab-recent-queries"),id:l("tab-recent-queries__item")},key:0},[r(t.i18n.QUERY_LIST_PANEL_RECENT_QUERIES)])])]),a("div",{classMap:{"slds-tabs_default__content":!0},attrs:{id:l("tab-recent-queries"),role:"tabpanel","aria-labelledby":""+l("tab-recent-queries__item")},key:5},[a("div",{classMap:{"slds-scrollable":!0},key:4},c(t.recentQueries,(function(e){return a("div",{classMap:{"slds-p-around_small":!0,"slds-border_bottom":!0,"recent-query-item":!0},attrs:{title:e.soql,"data-key":e.key},key:n(3,e.key),on:{click:d||(i._m0=o(t.selectQuery))}},[r(e.soql)])})))])])]}var gt=Object(i.registerTemplate)(ft);ft.stylesheets=[],Et&&ft.stylesheets.push.apply(ft.stylesheets,Et),ft.stylesheetTokens={hostAttribute:"cmp-queryListPanel-_queryListPanel-host",shadowAttribute:"cmp-queryListPanel-_queryListPanel"};class Ot extends(ce(i.LightningElement)){constructor(...e){super(...e),this.recentQueries=void 0}storeChange({ui:e}){e.recentQueries&&(this.recentQueries=e.recentQueries.map((e,t)=>({key:""+t,soql:e})))}connectedCallback(){se.dispatch({type:"LOAD_RECENT_QUERIES"})}selectQuery(e){const{key:t}=e.target.dataset,s=this.recentQueries.find(e=>e.key===t);s&&se.dispatch(re(s.soql))}}Object(i.registerDecorators)(Ot,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["recentQueries"]});var vt=Object(i.registerComponent)(Ot,{tmpl:gt});var Lt=[function(e,t,s){return[s?":host{flex:1;display:flex;flex-direction:column;position:relative}":[e,"{flex:1;display:flex;flex-direction:column;position:relative}"].join(""),".child-relationsihp-panel",t,"{position:relative;flex:1;display:flex}.child-relationsihp-panel",t," .slds-button",t,"{position:absolute;top:.25rem;right:.25rem;z-index:100}"].join("")}];var St=[function(e,t,s){return[s?":host{flex:1;flex-direction:column;display:flex}":[e,"{flex:1;flex-direction:column;display:flex}"].join(""),".output-panel",t,"{position:relative;flex:1}.slds-table--header-fixed_container",t,"{position:absolute;min-width:100%;height:100%;left:0;border-top:1px solid #dddbda;border-right:1px solid #dddbda}.slds-cell-fixed",t,",td",t,",th",t,"{max-width:400px;min-width:50px}.slds-cell-fixed",t,"{padding-left:.5rem;transform:translate(-.25rem);line-height:2rem}.slds-cell-fixed",t,':before{content:"";border-left:1px solid #dddbda;position:absolute;height:2rem;left:calc(.25rem - 1px)}'].join("")}];var kt=[function(e,t,s){return s?":host{display:flex}":[e,"{display:flex}"].join("")}];function wt(e,t,s,r){const{h:l,d:a,b:n}=e,{_m0:o}=r;return[t.isChildRelationship?l("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-m-right_xx-small":!0},attrs:{title:t.i18n.OUTPUT_CELL_SHOW_CHILD_REL},key:3,on:{click:o||(r._m0=n(t.handleClick))}},[l("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_small":!0},attrs:{"aria-hidden":"true"},key:1},[l("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#record_lookup")},key:0},[])]),l("span",{classMap:{"slds-assistive-text":!0},key:2},[a(t.i18n.OUTPUT_CELL_SHOW_CHILD_REL)])]):null,l("div",{classMap:{"slds-truncate":!0},attrs:{title:t.value.data},key:5},[t.url?l("a",{attrs:{href:t.url,target:"_blank",tabindex:"-1"},key:4},[a(t.value.data)]):null,t.url?null:a(t.value.data)])]}var jt=Object(i.registerTemplate)(wt);wt.stylesheets=[],kt&&wt.stylesheets.push.apply(wt.stylesheets,kt),wt.stylesheetTokens={hostAttribute:"cmp-outputCell-_outputCell-host",shadowAttribute:"cmp-outputCell-_outputCell"};class Ct extends(ce(i.LightningElement)){constructor(...e){super(...e),this.value=void 0}get isChildRelationship(){return this.value&&this.value.rawData&&this.value.rawData.totalSize}get url(){return/^[0-9A-Za-z]{18}$/.test(this.value.data)?`${I.instanceUrl}/${this.value.data}`:null}handleClick(){se.dispatch({type:"SELECT_CHILD_RELATIONSHIP",payload:{childRelationship:this.value.rawData}})}}Object(i.registerDecorators)(Ct,{publicProps:{value:{config:0}}});var Rt=Object(i.registerComponent)(Ct,{tmpl:jt});function Tt(e,t,s,i){const{d:r,h:l,k:a,i:n,c:o,b:c}=e,{_m0:d}=i;return[l("div",{classMap:{"output-panel":!0,"slds-scrollable_x":!0},key:11},[l("div",{classMap:{"slds-table--header-fixed_container":!0},key:10},[l("div",{classMap:{"slds-scrollable_y":!0},key:9,on:{scroll:d||(i._m0=c(t.handleScroll))}},[l("table",{classMap:{"slds-table":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0,"slds-table--header-fixed":!0},key:8},[l("thead",{key:3},[l("tr",{classMap:{"slds-line-height_reset":!0},key:2},n(t.columns,(function(e){return l("th",{classMap:{},attrs:{scope:"col"},key:a(1,e)},[l("div",{classMap:{"slds-cell-fixed":!0,"slds-truncate":!0},attrs:{title:e},key:0},[r(e)])])})))]),l("tbody",{key:7},n(t.rows,(function(e){return l("tr",{classMap:{"slds-hint-parent":!0},key:a(6,e.key)},n(e.values,(function(e){return l("td",{key:a(5,e.key)},[o("cmp-output-cell",Rt,{props:{value:e},key:4},[])])})))})))])])])])]}var At=Object(i.registerTemplate)(Tt);Tt.stylesheets=[],St&&Tt.stylesheets.push.apply(Tt.stylesheets,St),Tt.stylesheetTokens={hostAttribute:"cmp-outputTable-_outputTable-host",shadowAttribute:"cmp-outputTable-_outputTable"};class It{constructor(e){this.columnMap=new Map,this.columns=[],this.records=void 0,this.records=e}collect(){return this.records.forEach(e=>{this._collectColumnMap(e)}),this._collectColumns(),this.columns}_collectColumnMap(e,t=[]){Object.keys(e).forEach(s=>{if("attributes"!==s){let i=this.columnMap;t.forEach(e=>{i=i.get(e)}),i.has(s)||i.set(s,new Map);const r=e[s];r instanceof Object&&(r.totalSize||this._collectColumnMap(r,[...t,s]))}})}_collectColumns(e=this.columnMap,t=[]){for(let[s,i]of e)i.size?this._collectColumns(i,[...t,s]):this.columns.push([...t,s].join("."))}}Object(i.registerDecorators)(It,{fields:["columnMap","columns","records"]});class Pt extends(ce(i.LightningElement)){constructor(...e){super(...e),this.columns=void 0,this.rows=void 0,this._response=void 0,this._nextRecordsUrl=void 0,this._allRows=void 0}set response(e){this._response=e,this._nextRecordsUrl=e.nextRecordsUrl;const t=new It(e.records);this.columns=t.collect();const s=this._convertQueryResponse(e);this._allRows=s,this.rows=s.slice(0,200)}get response(){return this._response}async generateCsv(){const e=e=>/[\n",]/.test(e)?`"${e.replace(/"/g,'""')}"`:e;await this._fetchSubsequentRecords(this._nextRecordsUrl);return`${this.columns.map(e).join(",")}\n${this._allRows.map(t=>t.values.map(t=>e(t.data)).join(",")).join("\n")}`}handleScroll(e){const{target:t}=e;if(t.scrollTop+t.clientHeight>=t.scrollHeight){const e=this.rows.length;e<this._allRows.length&&(this.rows=[...this.rows,...this._allRows.slice(e,e+200)]);const{totalSize:t}=this._response;this._nextRecordsUrl&&this._allRows.length<t&&e>=this._allRows.length-400&&(this._fetchNextRecords(this._nextRecordsUrl).catch(e=>{console.error(e),Le({message:this.i18n.OUTPUT_TABLE_FAILED_FETCH_NEXT,errors:e})}),this._nextRecordsUrl=null)}}_convertQueryResponse(e){if(!e)return[];const t=this._allRows?this._allRows.length:0;return e.records.map((e,s)=>{const i=t+s;let r={key:i,values:[]};return this.columns.forEach((t,s)=>{const l=this._getFieldValue(t,e);let a=l;a&&a.totalSize&&(a=a.totalSize+" rows"),r.values.push({key:`${i}-${s}`,data:a,rawData:l,column:t})}),r})}_getFieldValue(e,t){let s=t;return e.split(".").forEach(e=>{s&&(s=s[e])}),s}async _fetchNextRecords(e){if(!e)return;const t=await I.request({method:"GET",url:e,headers:q()});this._nextRecordsUrl=t.nextRecordsUrl,this._allRows=[...this._allRows,...this._convertQueryResponse(t)]}async _fetchSubsequentRecords(e){await this._fetchNextRecords(e),this._nextRecordsUrl&&await this._fetchSubsequentRecords(this._nextRecordsUrl)}}Object(i.registerDecorators)(Pt,{publicProps:{response:{config:3}},publicMethods:["generateCsv"],fields:["columns","rows","_response","_nextRecordsUrl","_allRows"]});var xt=Object(i.registerComponent)(Pt,{tmpl:At});function Mt(e,t,s,r){const{c:l,d:a,b:n,h:o,t:c}=e,{_m0:p,_m1:u}=r;return[t.isLoading?l("base-spinner",d,{key:0},[]):null,t.response?o("div",{classMap:{"slds-p-around_small":!0,"slds-grid":!0},key:3},[o("button",{classMap:{"slds-button":!0,"slds-button_neutral":!0},key:1,on:{click:p||(r._m0=n(t.exportCsv))}},[a(t.i18n.OUTPUT_PANEL_EXPORT_CSV)]),o("div",{classMap:{"slds-p-around_x-small":!0,"slds-col_bump-left":!0},key:2},[a(t.i18n.OUTPUT_PANEL_TOTAL),c(": "),a(t.response.totalSize)])]):null,t.response?l("cmp-output-table",xt,{classMap:{"main-output":!0},props:{response:t.response},key:4},[]):null,t.response&&t.childResponse?o("div",{classMap:{"child-relationsihp-panel":!0},key:10},[o("button",{classMap:{"slds-button":!0,"slds-button_icon":!0},attrs:{title:t.i18n.OUTPUT_PANEL_CLOSE_CHILD_REL},key:8,on:{click:u||(r._m1=n(t.closeChildRelationship))}},[o("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:6},[o("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#close")},key:5},[])]),o("span",{classMap:{"slds-assistive-text":!0},key:7},[a(t.i18n.OUTPUT_PANEL_CLOSE_CHILD_REL)])]),l("cmp-output-table",xt,{props:{response:t.childResponse},key:9},[])]):null]}var Dt=Object(i.registerTemplate)(Mt);Mt.stylesheets=[],Lt&&Mt.stylesheets.push.apply(Mt.stylesheets,Lt),Mt.stylesheetTokens={hostAttribute:"cmp-outputPanel-_outputPanel-host",shadowAttribute:"cmp-outputPanel-_outputPanel"};class Nt extends(ce(i.LightningElement)){constructor(...e){super(...e),this.response=void 0,this.childResponse=void 0,this.isLoading=void 0,this._sObject=void 0}storeChange({query:e,ui:t}){this.isLoading=e.isFetching,e.data?this.response!==e.data&&(this.response=e.data,this._sObject=t.query.sObject):this.response=void 0,e.error&&(console.error(e.error),Le({message:this.i18n.OUTPUT_PANEL_FAILED_SOQL,errors:e.error}),se.dispatch({type:"CLEAR_QUERY_ERROR"})),this.childResponse=t.childRelationship}closeChildRelationship(){se.dispatch({type:"DESELECT_CHILD_RELATIONSHIP"})}async exportCsv(){this.isLoading=!0;try{const e=await this.template.querySelector("cmp-output-table.main-output").generateCsv(),t=new Uint8Array([239,187,191]),s=new Blob([t,e],{type:"text/csv"}),i=URL.createObjectURL(s),r=document.createElement("a");r.href=window.URL.createObjectURL(s),r.download=this._sObject+".csv",r.click(),URL.revokeObjectURL(i)}catch(e){console.error(e),Le({message:this.i18n.OUTPUT_PANEL_FAILED_EXPORT_CSV,errors:e})}this.isLoading=!1}}Object(i.registerDecorators)(Nt,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["response","childResponse","isLoading","_sObject"]});var Ft=Object(i.registerComponent)(Nt,{tmpl:Dt});var Ut=[function(e,t,s){return[".slds-welcome-mat__info",t,"{background-image:url(resources/slds/images/welcome-mat/bg-info@2x.png)}.logo",t,"{height:60px}"].join("")}];function Qt(e,t,s,i){const{h:r,d:l,b:a}=e,{_m0:n,_m1:o}=i;return[r("section",{classMap:{"slds-modal":!0,"slds-fade-in-open":!0,"slds-modal_small":!0},attrs:{role:"dialog",tabindex:"-1","aria-modal":"true"},key:16},[r("div",{classMap:{"slds-modal__container":!0},key:15},[r("div",{classMap:{"slds-modal__content":!0},key:14},[r("div",{classMap:{"slds-welcome-mat":!0,"slds-welcome-mat_splash":!0},key:13},[r("div",{classMap:{"slds-welcome-mat__content":!0,"slds-grid":!0},key:12},[r("div",{classMap:{"slds-welcome-mat__info":!0,"slds-size_1-of-1":!0},key:11},[r("div",{classMap:{"slds-welcome-mat__info-content":!0},key:10},[r("div",{classMap:{"slds-m-bottom_x-large":!0},key:1},[r("img",{classMap:{logo:!0},attrs:{src:"./resources/imgs/logo.svg"},key:0},[])]),r("h2",{classMap:{"slds-welcome-mat__info-title":!0},key:2},[l(t.i18n.WELCOME_TITLE)]),r("div",{classMap:{"slds-welcome-mat__info-description":!0,"slds-text-longform":!0},key:4},[r("p",{key:3},[l(t.i18n.WELCOME_DESCRIPTION)])]),r("div",{classMap:{"slds-welcome-mat__info-actions":!0},key:7},[r("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:5,on:{click:n||(i._m0=a(t.loginProduction))}},[l(t.i18n.WELCOME_LOGIN_PRODUCTION)]),r("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:6,on:{click:o||(i._m1=a(t.loginSandbox))}},[l(t.i18n.WELCOME_LOGIN_SANDBOX)])]),r("div",{classMap:{"slds-welcome-mat__info-actions":!0,"slds-m-top_small":!0},key:9},[r("a",{classMap:{"slds-button":!0},attrs:{href:"/"},key:8},[l(t.i18n.WELCOME_BACK_HOME)])])])])])])])])]),r("div",{classMap:{"slds-backdrop":!0,"slds-backdrop_open":!0},key:17},[])]}var qt=Object(i.registerTemplate)(Qt);Qt.stylesheets=[],Ut&&Qt.stylesheets.push.apply(Qt.stylesheets,Ut),Qt.stylesheetTokens={hostAttribute:"cmp-welcomeModal-_welcomeModal-host",shadowAttribute:"cmp-welcomeModal-_welcomeModal"};class Bt extends(ce(i.LightningElement)){loginProduction(){U("https://login.salesforce.com")}loginSandbox(){U("https://test.salesforce.com")}}var Ht=Object(i.registerComponent)(Bt,{tmpl:qt});function Jt(e,t,s,i){const{c:r,h:l}=e;return[t.isLoading?r("base-spinner",d,{key:0},[]):null,l("div",{classMap:{app:!0},key:15},[l("div",{key:2},[r("cmp-header",pe,{key:1},[])]),l("div",{classMap:{body:!0},key:14},[l("div",{classMap:{"left-panel":!0},key:5},[r("cmp-sobjects-panel",Ce,{className:t.sobjectsPanelClass,key:3},[]),t.selectedSObject?r("cmp-fields-panel",at,{key:4},[]):null]),l("div",{classMap:{"right-panel":!0},key:13},[l("div",{classMap:{"right-top-panel":!0},key:10},[l("div",{classMap:{"right-top-left-panel":!0},key:7},[r("cmp-query-editor-panel",yt,{key:6},[])]),l("div",{classMap:{"right-top-right-panel":!0},key:9},[r("cmp-query-list-panel",vt,{key:8},[])])]),l("div",{classMap:{"right-bottom-panel":!0},key:12},[r("cmp-output-panel",Ft,{key:11},[])])])])]),t.isLoggedIn?null:r("cmp-welcome-modal",Ht,{key:16},[])]}var $t=Object(i.registerTemplate)(Jt);Jt.stylesheets=[],r&&Jt.stylesheets.push.apply(Jt.stylesheets,r),Jt.stylesheetTokens={hostAttribute:"app-container-_container-host",shadowAttribute:"app-container-_container"};class Yt extends i.LightningElement{get sobjectsPanelClass(){return this.selectedSObject?"slds-hide":""}storeChange({ui:e}){this.isLoggedIn=e.isLoggedIn,e.selectedSObject?this.selectedSObject=e.selectedSObject:this.selectedSObject=null}constructor(){super(),this.isLoading=void 0,this.isLoggedIn=void 0,this.selectedSObject=void 0,this.isLoading=!0,function(e){const t=window.location.hash;R.a.browser.init(D()),R.a.browser.on("disconnect",()=>{localStorage.removeItem("lsb.accessToken"),localStorage.removeItem("lsb.instanceUrl")});const s=localStorage.getItem("lsb.accessToken"),i=localStorage.getItem("lsb.instanceUrl");if(s&&i)return I=new R.a.Connection({accessToken:s,instanceUrl:i,version:x,proxyUrl:M()}),void N(e);R.a.browser.on("connect",t=>{localStorage.setItem("lsb.accessToken",t.accessToken),localStorage.setItem("lsb.instanceUrl",t.instanceUrl),I=t,N(e)}),t&&R.a.browser.init(D()),!t&&e&&e()}(this._loginCallback.bind(this)),window.addEventListener("show-toast",e=>{const{detail:t}=e;if(!t)return;const{message:s="Unexpected error occured.",errors:r=[]}=t,l=Object(i.createElement)("base-toast",{is:ve});l.message=s,l.errors=r,document.body.appendChild(l)})}_loginCallback(e,t){if(this.isLoading=!1,e)return console.error(e),void Le({message:"Failed to fetch login user. Your token is expired. Please login again.",errors:e});t&&(se.dispatch(function(e){return{type:"LOGIN",payload:{user:e}}}(t)),se.dispatch(ae()))}}Object(i.registerDecorators)(Yt,{wire:{storeChange:{adapter:ie,dynamic:[],method:1,config:function(e){return{store:se}}}},fields:["isLoading","isLoggedIn","selectedSObject"]});var Vt=Object(i.registerComponent)(Yt,{tmpl:$t});const Gt={"Service Worker":"serviceWorker"in navigator};Object.keys(Gt).some(e=>!Gt[e])?function(){const{outdated:e}=window;e.style.display="unset";let t="This browser doesn't support all the required features";t+="<ul>";for(const[e,s]of Object.entries(Gt))t+=`<li><b>${e}:<b> ${s?"✅":"❌"}</li>`;t+="</ul>",e.querySelector(".unsupported_message").innerHTML=t}():(customElements.define("app-container",Vt.CustomElementConstructor),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js"),console.log("Service worker registered")}))}});