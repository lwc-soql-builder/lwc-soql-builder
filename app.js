!function(e){function t(t){for(var i,a,o=t[0],n=t[1],c=t[2],p=0,u=[];p<o.length;p++)a=o[p],Object.prototype.hasOwnProperty.call(l,a)&&l[a]&&u.push(l[a][0]),l[a]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);for(d&&d(t);u.length;)u.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,o=1;o<s.length;o++){var n=s[o];0!==l[n]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},l={1:0},r=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./";var o=window.webpackJsonp=window.webpackJsonp||[],n=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=n;r.push([106,0,2]),s()}({106:function(e,t,s){e.exports=s(175)},117:function(e,t){},119:function(e,t){},175:function(e,t,s){"use strict";s.r(t);s(107);var i=s(2),l=s(28);var r=[function(e,t,s){return"@media (display-mode:standalone){.app"+t+"{border-top:1px solid #fff}}.app"+t+"{display:flex;flex-direction:column;width:100%;height:100%}.body"+t+"{flex:1;flex-direction:row}.body"+t+",.left-panel"+t+"{display:flex;background-color:#fff}.left-panel"+t+"{height:100%;width:300px;position:relative;border-right:1px solid #dddbda}.right-panel"+t+"{display:flex;flex:1;flex-direction:column}.right-top-panel"+t+"{border-bottom:1px solid #dddbda;height:300px;display:flex}.right-top-left-panel"+t+"{flex:1;border-right:1px solid #dddbda;display:flex;flex-direction:column}.right-top-right-panel"+t+"{width:300px}.right-bottom-panel"+t+"{flex:1;display:flex;flex-direction:column}"}],a=s(69),o=s.n(a);function n(e,t,s,i){const{t:l,h:r}=e;return[r("div",{classMap:{"slds-spinner_container":!0},key:4},[r("div",{classMap:{"slds-spinner":!0,"slds-spinner_medium":!0,"slds-spinner_brand":!0},attrs:{role:"status"},key:3},[r("span",{classMap:{"slds-assistive-text":!0},key:0},[l("Loading")]),r("div",{classMap:{"slds-spinner__dot-a":!0},key:1},[]),r("div",{classMap:{"slds-spinner__dot-b":!0},key:2},[])])])]}var c=Object(i.registerTemplate)(n);n.stylesheets=[],o.a&&n.stylesheets.push.apply(n.stylesheets,o.a),n.stylesheetTokens={hostAttribute:"base-spinner-_spinner-host",shadowAttribute:"base-spinner-_spinner"};class d extends i.LightningElement{close(){this.template.host.remove()}}Object(i.registerDecorators)(d,{publicMethods:["close"]});var p=Object(i.registerComponent)(d,{tmpl:c});var u=[function(e,t,s){return".header-logo"+t+"{height:43.2px;width:180px}"}];function h(e,t,s,l){const{h:r,t:a,d:o,b:n}=e,{_m0:c}=l;return[r("header",{classMap:{"slds-builder-header":!0},key:19},[r("div",{classMap:{"slds-builder-header__item":!0},key:2},[r("div",{classMap:{"slds-builder-header__item-label":!0,"slds-media":!0,"slds-media_center":!0},key:1},[r("img",{classMap:{"header-logo":!0},attrs:{src:"./resources/imgs/logo_white.svg"},key:0},[])])]),r("div",{classMap:{"slds-builder-header__item":!0,"slds-builder-header__utilities":!0},key:18},[t.apiUsage?r("div",{classMap:{"slds-builder-header__utilities-item":!0},key:4},[r("h1",{classMap:{"slds-builder-header__item-label":!0},key:3},[a("API Usage: "),o(t.apiUsage)])]):null,t.userLabel?r("div",{classMap:{"slds-builder-header__utilities-item":!0},key:6},[r("h1",{classMap:{"slds-builder-header__item-label":!0},key:5},[o(t.userLabel)])]):null,t.isLoggedIn?r("div",{classMap:{"slds-builder-header__utilities-item":!0},key:13},[r("a",{classMap:{"slds-builder-header__item-action":!0,"slds-media":!0,"slds-media_center":!0},attrs:{href:"javascript:void(0);"},key:12,on:{click:c||(l._m0=n(t.logout))}},[r("div",{classMap:{"slds-media__figure":!0},key:10},[r("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-logout":!0,"slds-current-color":!0},key:9},[r("svg",{classMap:{"slds-icon":!0,"slds-icon_x-small":!0},attrs:{"aria-hidden":"true"},key:8},[r("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#logout")},key:7},[])])])]),r("div",{classMap:{"slds-media__body":!0},key:11},[a("Logout")])])]):null,r("div",{classMap:{"slds-builder-header__utilities-item":!0},key:17},[r("a",{classMap:{"slds-builder-header__item-action":!0,"slds-media":!0,"slds-media_center":!0},attrs:{href:"https://github.com/lwc-soql-builder/lwc-soql-builder",target:"_blank"},key:16},[r("span",{classMap:{"slds-avatar":!0},key:15},[r("img",{attrs:{src:"./resources/imgs/GitHub-Mark-Light-64px.png"},key:14},[])])])])])])]}var b=Object(i.registerTemplate)(h);h.stylesheets=[],u&&h.stylesheets.push.apply(h.stylesheets,u),h.stylesheetTokens={hostAttribute:"cmp-header-_header-host",shadowAttribute:"cmp-header-_header"};var m=s(41),_=s(103);function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){f(e,t,s[t])}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){v(e,t,s[t])}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){O(e,t,s[t])}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function w(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_SOBJECT":return k({},e,{isFetching:!0});case"RECEIVE_SOBJECT_SUCCESS":return k({},e,{isFetching:!1,data:t.payload.data,error:null});case"RECEIVE_SOBJECT_ERROR":return k({},e,{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_SOBJECT_ERROR":return k({},e,{error:void 0});default:return e}}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){E(e,t,s[t])}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var x=s(7);var S=s(21),M=s.n(S);function C(){return"ja"===navigator.language?"https://asia-northeast1-undefined.cloudfunctions.net/asia_northeast1/proxy/":"https://us-central1-undefined.cloudfunctions.net/us_central1/proxy/"}const R={clientId:"3MVG9n_HvETGhr3Bp2TP0lUhBaOTAOuCH9OKmjFKsspVG.z8WOx0Vb94skZ8d4wHTVuMf5DArbdwCb05yIAT5",redirectUri:`${window.location.origin}${window.location.pathname}`,version:"48.0",proxyUrl:C()};let T;function L(e){T.request("/services/oauth2/userinfo").then(t=>{e&&e(null,t)}).catch(t=>{e&&e(t),A()})}function A(){T=null,M.a.browser.logout(),Z.dispatch({type:"LOGOUT"})}function F(e){window.open=()=>null,M.a.browser.login({loginUrl:e})}function P(){return!(!T||!T.accessToken)}function q(e){return e?e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):""}const I=new RegExp("^([a-z_]?[a-z])+(?:__[cr]|__Share|__latitude__s|__longitude__s)$","i");function U(e,t){return t?e&&I.test(t)?`${e}__${t}`:t:null}function D(e,t){return t?e?Array.isArray(t)?t.map(t=>U(e,t)):t.split(".").map(t=>U(e,t)).join("."):t:null}function N(e,t){if(!t)return null;if(!e)return t;const s=q(e),i=new RegExp(`^${s}__(.*)$`,"i"),l=t.match(i);return l?l[1]:t}function Q(e,t){return t?e?Array.isArray(t)?t.map(t=>N(e,t)):t.split(".").map(t=>N(e,t)).join("."):t:null}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){B(e,t,s[t])}))}return e}function B(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V={fields:[Object(x.b)("Id")],sObject:void 0};function z(e,t){return t?`${t}.${e}`:e}function J(e){return t=>Q(e,t)}function G(e,t,s,i){const l=J(t);s=l(s),i=l(i);const r=l(Object(x.c)(e)),a=l(z(s,i));return r.includes(a)?$({},e,{fields:e.fields.filter(e=>l(z(e.field,e.relationships))!==a)}):$({},e,i?{fields:[...e.fields,Object(x.b)({field:s,relationships:i.split(".")})]}:{fields:[...e.fields,Object(x.b)(s)]})}function K(e=[],t){const{soql:s}=t.payload,i=[s,...e.filter(e=>e!==s).slice(0,9)];try{localStorage.setItem("lsb.recentQueries",JSON.stringify(i))}catch(e){console.warn("Failed to save recent queries from localStorage",e)}return i}function H(){try{const e=localStorage.getItem("lsb.recentQueries");if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load recent queries from localStorage",e)}return[]}function W(e=V,t,s){const{fieldName:i,relationships:l,childRelationship:r}=s.payload;return r?function(e,t,s,i,l){const r=J(t);s=r(s),l=r(l);const a=e.fields.find(e=>e.subquery&&r(e.subquery.relationshipName)===l);if(!a)return $({},e,{fields:[...e.fields,Object(x.b)({subquery:{fields:[Object(x.b)(s)],relationshipName:l}})]});i=r(i);const o=G(a.subquery,t,s,i),n=e.fields.map(e=>e.subquery&&r(e.subquery.relationshipName)===l?$({},e,{subquery:o}):e);return $({},e,{fields:n})}(e,t,i,l,r):G(e,t,i,l)}let Y=[_.a];const Z=Object(m.c)(Object(m.b)({metadata:function(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_METADATA":return y({},e,{isFetching:!0,data:void 0,error:void 0});case"RECEIVE_METADATA_SUCCESS":return y({},e,{isFetching:!1,data:t.payload.data,error:void 0});case"RECEIVE_METADATA_ERROR":return y({},e,{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_METADATA_ERROR":return y({},e,{error:void 0});default:return e}},sobjects:function(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_SOBJECTS":return g({},e,{isFetching:!0});case"RECEIVE_SOBJECTS_SUCCESS":return g({},e,{isFetching:!1,data:t.payload.data,error:null});case"RECEIVE_SOBJECTS_ERROR":return g({},e,{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_SOBJECTS_ERROR":return g({},e,{error:void 0});default:return e}},sobject:function(e={},t){switch(t.type){case"REQUEST_SOBJECT":case"RECEIVE_SOBJECT_SUCCESS":case"RECEIVE_SOBJECT_ERROR":case"CLEAR_SOBJECT_ERROR":{const s=e[t.payload.sObjectName];return k({},e,{[t.payload.sObjectName]:w(s,t)})}default:return e}},query:function(e={isFetching:!1,data:null,error:null},t){switch(t.type){case"REQUEST_QUERY":return j({},e,{isFetching:!0,data:void 0,error:void 0});case"RECEIVE_QUERY_SUCCESS":return j({},e,{isFetching:!1,data:t.payload.data,error:void 0});case"RECEIVE_QUERY_ERROR":return j({},e,{isFetching:!1,data:void 0,error:t.payload.error});case"CLEAR_QUERY_ERROR":return j({},e,{error:void 0});default:return e}},ui:function(e={},t){switch(t.type){case"LOGIN":return $({},e,{isLoggedIn:!0,user:t.payload.user});case"LOGOUT":return $({},e,{isLoggedIn:!1});case"UPDATE_API_LIMIT":{const{limitInfo:t}=T;return $({},e,{apiUsage:t?t.apiUsage:void 0})}case"RECEIVE_QUERY_SUCCESS":return $({},e,{recentQueries:K(e.recentQueries,t),childRelationship:void 0});case"RECEIVE_METADATA_SUCCESS":return $({},e,{namespace:t.payload.data.organizationNamespace});case"LOAD_RECENT_QUERIES":return $({},e,{recentQueries:H()});case"SELECT_SOBJECT":{const{sObjectName:s}=t.payload,i=$({},V,{sObject:Q(e.namespace,s)});return $({},e,{selectedSObject:s,query:i,soql:Object(x.a)(i,{format:!0})})}case"DESELECT_SOBJECT":return $({},e,{selectedSObject:void 0});case"TOGGLE_FIELD":{const s=W(e.query,e.namespace,t);return $({},e,{query:s,soql:Object(x.a)(s,{format:!0})})}case"TOGGLE_RELATIONSHIP":{const s=function(e=[],t,s){const{relationshipName:i}=s.payload,l=J(t),r=l(i);if(l(Object(x.c)(e)).includes(r))return $({},e,{fields:e.fields.filter(e=>!e.subquery||l(e.subquery.relationshipName)!==r)});const a={fields:[Object(x.b)("Id")],relationshipName:r};return $({},e,{fields:[...e.fields,Object(x.b)({subquery:a})]})}(e.query,e.namespace,t);return $({},e,{query:s,soql:Object(x.a)(s,{format:!0})})}case"UPDATE_SOQL":{const{soql:s}=t.payload;if(!s.trim())return $({},e,{selectedSObject:void 0,query:void 0,soql:s});const i=Object(x.d)(s)?Object(x.e)(s):e.query;return $({},e,{selectedSObject:i?i.sObject:void 0,query:i,soql:s})}case"FORMAT_SOQL":return $({},e,{soql:Object(x.a)(e.query,{format:!0})});case"SELECT_CHILD_RELATIONSHIP":return $({},e,{childRelationship:t.payload.childRelationship});case"DESELECT_CHILD_RELATIONSHIP":return $({},e,{childRelationship:void 0});default:return e}}}),Object(m.a)(...Y));function X(e){return e.getState()}function ee(){return(e,t)=>{(function({metadata:e}){return!e||!e.data})(t())&&e(async e=>{P()&&(e({type:"REQUEST_METADATA"}),T.metadata.describe("48.0").then(t=>{var s;e({type:"RECEIVE_METADATA_SUCCESS",payload:{data:t,soql:s}})}).catch(t=>{e({type:"RECEIVE_METADATA_ERROR",payload:{error:t}})}))})}}function te(e){return{type:"UPDATE_SOQL",payload:{soql:e}}}function se(){return(e,t)=>{(function({sobjects:e}){return!e||!e.data})(t())&&e(async e=>{P()&&(e({type:"REQUEST_SOBJECTS"}),T.describeGlobal().then(t=>{e({type:"RECEIVE_SOBJECTS_SUCCESS",payload:{data:t}}),e({type:"UPDATE_API_LIMIT"})}).catch(t=>{e({type:"RECEIVE_SOBJECTS_ERROR",payload:{error:t}})}))})}}function ie(e){return(t,s)=>{(function({sobject:e},t){return!e[t]||!e[t].data})(s(),e)&&t(function(e){return async t=>{P()&&(t(function(e){return{type:"REQUEST_SOBJECT",payload:{sObjectName:e}}}(e)),T.describe(e).then(s=>{t(function(e,t){return{type:"RECEIVE_SOBJECT_SUCCESS",payload:{sObjectName:e,data:t}}}(e,s)),t({type:"UPDATE_API_LIMIT"})}).catch(s=>{t(function(e,t){return{type:"RECEIVE_SOBJECT_ERROR",payload:{sObjectName:e,error:t}}}(e,s))}))}}(e))}}Object(l.register)(X,e=>{let t,s;const i=()=>{const s=t.getState();e.dispatchEvent(new l.ValueChangedEvent(s))};e.addEventListener("connect",()=>{s=t.subscribe(i),i()}),e.addEventListener("disconnect",()=>{s&&s()}),e.addEventListener("config",e=>{t=e.store})});class le extends i.LightningElement{constructor(...e){super(...e),this.isLoggedIn=void 0,this._user=void 0,this._apiUsage=void 0}get userLabel(){return this._user?`${this._user.name}(${this._user.preferred_username})`:""}get apiUsage(){return this._apiUsage?`${this._apiUsage.used}/${this._apiUsage.limit}`:""}storeChange({ui:e}){this.isLoggedIn=e.isLoggedIn,this._user=e.user,this._apiUsage=e.apiUsage}logout(){A()}}Object(i.registerDecorators)(le,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["isLoggedIn","_user","_apiUsage"]});var re=Object(i.registerComponent)(le,{tmpl:b});var ae=[function(e,t,s){return(s?".slds-tree_container"+t+",:host{width:100%;display:flex}":".slds-tree_container"+t+","+e+"{width:100%;display:flex}")+".slds-tree_container"+t+"{flex-direction:column}.slds-tree__group-header"+t+"{padding:.5rem .5rem .5rem 1rem;font-size:1rem;font-weight:700}.sobjects-list"+t+"{flex:1;position:relative;margin-top:.5rem}.slds-tabs_default__content"+t+"{position:absolute;height:100%;left:0;right:0;padding:0}.left-panel-scrollable"+t+"{position:absolute;height:100%;left:0;right:0;overflow-x:hidden;overflow-y:auto}"}];function oe(e,t,s,l){const{c:r,t:a,h:o,b:n,d:c,k:d,i:u,gid:h}=e,{_m0:b,_m1:m}=l;return[t.isLoading?r("base-spinner",p,{key:0},[]):null,o("div",{classMap:{"slds-tree_container":!0},key:16},[o("div",{key:2},[o("h2",{classMap:{"slds-tree__group-header":!0,"slds-truncate":!0},key:1},[a("SObjects")])]),o("div",{classMap:{"slds-form-element":!0,"slds-p-horizontal_large":!0},key:9},[o("label",{classMap:{"slds-form-element__label":!0,"slds-assistive-text":!0},key:3},[a("Filter sObjects")]),o("div",{classMap:{"slds-form-element__control":!0,"slds-input-has-icon":!0,"slds-input-has-icon_left":!0},key:8},[o("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-search":!0},key:6},[o("svg",{classMap:{"slds-icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0,"slds-icon-text-default":!0},attrs:{"aria-hidden":"true"},key:5},[o("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#search")},key:4},[])])]),o("input",{classMap:{"slds-input":!0},attrs:{type:"search",placeholder:"Quick Find"},key:7,on:{keyup:b||(l._m0=n(t.filterSObjects))}},[])])]),o("div",{classMap:{"sobjects-list":!0,"slds-border_top":!0},key:15},[t.sobjects?o("ul",{classMap:{"slds-tree":!0,"left-panel-scrollable":!0},attrs:{"aria-describedby":""+h("entity-header")},key:14},u(t.sobjects,(function(e){return e.queryable?o("li",{attrs:{"aria-level":"1",role:"treeitem"},key:d(13,e.name)},[o("div",{classMap:{"slds-tree__item":!0},key:12},[o("span",{classMap:{"slds-has-flexi-truncate":!0},key:11},[o("a",{classMap:{"slds-tree__item-label":!0,"slds-truncate":!0},attrs:{title:e.itemLabel,"data-name":e.name},key:10,on:{click:m||(l._m1=n(t.selectSObject))}},[c(e.itemLabel)])])])]):null}))):null])])]}var ne=Object(i.registerTemplate)(oe);oe.stylesheets=[],ae&&oe.stylesheets.push.apply(oe.stylesheets,ae),oe.stylesheetTokens={hostAttribute:"cmp-sobjectsPanel-_sobjectsPanel-host",shadowAttribute:"cmp-sobjectsPanel-_sobjectsPanel"};var ce=[function(e,t,s){return".slds-notify__content"+t+"{width:500px;max-width:100%}.error-details"+t+"{max-height:300px}.slds-form-element__label"+t+"{color:#fff}"}];function de(e,t,s,l){const{t:r,h:a,d:o,k:n,i:c,gid:d,b:p}=e,{_m0:u,_m1:h}=l;return[a("div",{classMap:{"slds-notify_container":!0},key:23},[a("div",{classMap:{"slds-notify":!0,"slds-notify_toast":!0,"slds-theme_error":!0},attrs:{role:"status"},key:22},[a("span",{classMap:{"slds-assistive-text":!0},key:0},[r("error")]),a("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-error":!0,"slds-m-right_small":!0,"slds-no-flex":!0,"slds-align-top":!0},key:3},[a("svg",{classMap:{"slds-icon":!0,"slds-icon_small":!0},attrs:{"aria-hidden":"true"},key:2},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#error")},key:1},[])])]),a("div",{classMap:{"slds-notify__content":!0},key:16},[a("h2",{classMap:{"slds-text-heading_small":!0},key:4},[o(t.message)]),t.errorMessages.length?a("ul",{classMap:{"slds-list_dotted":!0,"slds-p-top_small":!0},key:6},c(t.errorMessages,(function(e){return a("li",{key:n(5,e)},[o(e)])}))):null,a("div",{classMap:{"slds-p-vertical_x-small":!0},key:14},[a("div",{classMap:{"slds-form-element":!0},key:13},[a("div",{classMap:{"slds-form-element__control":!0},key:12},[a("div",{classMap:{"slds-checkbox":!0},key:11},[a("input",{attrs:{type:"checkbox",name:"options",id:d("checkbox-view-details")},props:{value:"true",checked:t.viewDetails},key:7,on:{change:u||(l._m0=p(t.handleCheckboxChange))}},[]),a("label",{classMap:{"slds-checkbox__label":!0},attrs:{for:""+d("checkbox-view-details")},key:10},[a("span",{classMap:{"slds-checkbox_faux":!0},key:8},[]),a("span",{classMap:{"slds-form-element__label":!0},key:9},[r("Show Details")])])])])])]),t.viewDetails?a("pre",{classMap:{"error-details":!0,"slds-box":!0,"slds-box_x-small":!0,"slds-theme_default":!0},key:15},[o(t.errorDetails)]):null]),a("div",{classMap:{"slds-notify__close":!0},key:21},[a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-button_icon-inverse":!0},attrs:{title:"Close"},key:20,on:{click:h||(l._m1=p(t.handleClose))}},[a("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_large":!0},attrs:{"aria-hidden":"true"},key:18},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#close")},key:17},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:19},[r("Close")])])])])])]}var pe=Object(i.registerTemplate)(de);function ue(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function he(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){ue(e,t,s[t])}))}return e}({},t,{name:t.name,message:t.message,stack:t.stack}):t}),2)}de.stylesheets=[],ce&&de.stylesheets.push.apply(de.stylesheets,ce),de.stylesheetTokens={hostAttribute:"base-toast-_toast-host",shadowAttribute:"base-toast-_toast"};class be extends i.LightningElement{constructor(...e){super(...e),this.message=void 0,this.errors=void 0,this.viewDetails=!1}get errorMessages(){return e=this.errors,Array.isArray(e)||(e=[e]),e.filter(e=>!!e).map(e=>"string"==typeof e.message?e.message:e.statusText).reduce((e,t)=>e.concat(t),[]).filter(e=>!!e);var e}get errorDetails(){return he(this.errors)}handleCheckboxChange(e){this.viewDetails=e.target.checked}handleClose(){this.template.host.remove()}}Object(i.registerDecorators)(be,{publicProps:{message:{config:0},errors:{config:0}},fields:["viewDetails"]});var me=Object(i.registerComponent)(be,{tmpl:pe});function _e(e){window.dispatchEvent(new CustomEvent("show-toast",{detail:e}))}function ye(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class fe extends i.LightningElement{constructor(...e){super(...e),this.sobjects=void 0,this.isLoading=void 0,this._rawSObjects=void 0}storeChange({sobjects:e}){this.isLoading=e.isFetching,e.data?(this._rawSObjects=e.data.sobjects.map(e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){ye(e,t,s[t])}))}return e}({},e,{itemLabel:`${e.name} / ${e.label}`})),this.sobjects=this._rawSObjects):e.error&&(console.error(e.error),_e({message:"Failed to fetch sObjects.",errors:e.error}),Z.dispatch({type:"CLEAR_SOBJECTS_ERROR"}))}filterSObjects(e){const t=e.target.value;if(t){const e=q(t),s=new RegExp(e,"i");this.sobjects=this._rawSObjects.filter(e=>s.test(`${e.name} ${e.label}`))}else this.sobjects=this._rawSObjects}selectSObject(e){const t=e.target.dataset.name;Z.dispatch(function(e){return{type:"SELECT_SOBJECT",payload:{sObjectName:e}}}(t))}}Object(i.registerDecorators)(fe,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["sobjects","isLoading","_rawSObjects"]});var ge=Object(i.registerComponent)(fe,{tmpl:ne});var ve=[function(e,t,s){return(s?".slds-tree_container"+t+",:host{width:100%;display:flex}":".slds-tree_container"+t+","+e+"{width:100%;display:flex}")+".slds-tree_container"+t+"{flex-direction:column}.slds-tree__group-header"+t+"{padding:.5rem;font-size:1rem;font-weight:700}.slds-tabs_default"+t+"{display:flex;flex-direction:column;height:100%}.slds-tabs_default__item[aria-selected=true]"+t+"{color:#080707}.slds-tabs_default__item[aria-selected=true]"+t+" .slds-tabs_default__link"+t+"{font-weight:700}.slds-tabs_default__item[aria-selected=true]"+t+":after{background-color:#1589ee;height:.1875rem}.slds-tabs_default__content"+t+"{flex:1;position:relative;padding:0}.left-panel-scrollable"+t+"{position:absolute;height:100%;left:0;right:0;overflow-x:hidden;overflow-y:auto}.slds-panel__header"+t+"{padding:0 .75rem;border-top:1px solid #dddbda}.slds-panel__header-title"+t+"{font-size:100%;font-weight:700;line-height:2.5rem;height:2.5rem}"}];var ke=[function(e,t,s){return".slds-tree__item"+t+" button[aria-hidden=true]"+t+"{visibility:hidden}.slds-tree__item"+t+" .slds-text-color_error"+t+"{padding-left:2rem}"}];function Oe(e,t,s,l){const{h:r,t:a,b:o,d:n,c:c,k:d,i:p}=e,{_m0:u,_m1:h}=l;return[r("ul",{classMap:{"slds-tree":!0},key:13},p(t.fields,(function(e){return r("li",{attrs:{"aria-level":t.level,"aria-selected":e.isActive,"aria-expanded":e.isExpanded,role:"treeitem"},key:d(12,e.name)},[r("div",{classMap:{"slds-tree__item":!0},key:6},[r("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-m-right_x-small":!0},attrs:{"aria-hidden":e.isNotReference,tabindex:"-1",title:"Expand Reference Field","data-field":e.name},key:3,on:{click:u||(l._m0=o(t.toggleReferenceField))}},[r("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_small":!0},attrs:{"aria-hidden":"true"},key:1},[r("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#chevronright")},key:0},[])]),r("span",{classMap:{"slds-assistive-text":!0},key:2},[a("Expand Reference Field")])]),r("span",{classMap:{"slds-has-flexi-truncate":!0},key:5},[r("a",{classMap:{"slds-tree__item-label":!0,"slds-truncate":!0},attrs:{title:e.itemLabel,"data-name":e.name},key:4,on:{click:h||(l._m1=o(t.selectField))}},[n(e.itemLabel)])])]),e.isExpanded&&t.isMaxLevel?r("ul",{classMap:{"slds-tree":!0},key:10},[r("li",{attrs:{"aria-level":t.level},key:9},[r("div",{classMap:{"slds-tree__item":!0},key:8},[r("div",{classMap:{"slds-text-color_error":!0},key:7},[a("No more than five levels can be specified in a child-to-parent relationship.")])])])]):null,e.isExpanded?t.isMaxLevel?null:e.relationshipPath?c("cmp-fields-tree",Se,{props:{sobject:e.relationshipSObjectName,relationship:e.relationshipPath,rootlevel:t.rootlevel,childrelation:t.childrelation},key:11},[]):null:null])})))]}var we=Object(i.registerTemplate)(Oe);function je(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){Ee(e,t,s[t])}))}return e}function Ee(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Oe.stylesheets=[],ke&&Oe.stylesheets.push.apply(Oe.stylesheets,ke),Oe.stylesheetTokens={hostAttribute:"cmp-fieldsTree-_fieldsTree-host",shadowAttribute:"cmp-fieldsTree-_fieldsTree"};class xe extends i.LightningElement{constructor(...e){super(...e),this.sobject=void 0,this.relationship=void 0,this.childrelation=void 0,this.rootlevel=1,this.sobjectMeta=void 0,this.fields=[],this._namespace=void 0,this._keyword=void 0,this._rawFields=[],this._expandedFieldNames={}}get keyword(){return this._keyword}set keyword(e){this._keyword!==e&&(this._keyword=e,this._filterFields())}get level(){return this.relationship?this.relationship.split(".").length+this.rootLevelNum:this.rootLevelNum}get isMaxLevel(){return this.level>4+this.rootLevelNum}get rootLevelNum(){return parseInt(this.rootlevel,10)}storeChange({sobject:e,ui:t}){this._namespace=t.namespace;const s=e[this.sobject];s&&(s.data&&(this.sobjectMeta=s.data),this._updateFields(t.query))}connectedCallback(){Z.dispatch(ie(this.sobject))}selectField(e){const t=e.target.dataset.name;Z.dispatch(function(e,t,s){return{type:"TOGGLE_FIELD",payload:{fieldName:e,relationships:t,childRelationship:s}}}(t,this.relationship,this.childrelation))}toggleReferenceField(e){const t=e.target.dataset.field;this._expandedFieldNames[t]=!this._expandedFieldNames[t],this._filterFields()}_updateFields(e){if(!this.sobjectMeta)return;const t=this._getSelectedFields(e);this._rawFields=this.sobjectMeta.fields.map(e=>je({},e,{itemLabel:`${e.name} / ${e.label}`,isNotReference:"reference"!==e.type,isActive:t.includes(this._getRawFieldName(e)),isExpanded:!1},this._generateRelationshipProperties(e))),this._filterFields()}_getSelectedFields(e){if(!e)return[];if(this.childrelation){const t=e.fields.find(e=>{return"FieldSubquery"===e.type&&(t=this._namespace,s=e.subquery.relationshipName,i=this.childrelation,D(t,s)===D(t,i));var t,s,i});return t?this._getFlattenedFields(t):[]}return this._getFlattenedFields(e)}_getRawFieldName(e){let t;return t=this.relationship?`${this.relationship}.${e.name}`:e.name,this._fullApiName(t)}_getRelationshipPath(e){return this.relationship?`${this.relationship}.${e.relationshipName}`:e.relationshipName}_generateRelationshipProperties(e){return{relationshipSObjectName:e.referenceTo&&e.referenceTo.length>0?e.referenceTo[0]:void 0,relationshipPath:this._getRelationshipPath(e)}}_filterFields(){let e;if(1===this.level&&this.keyword){const t=q(this.keyword),s=new RegExp(t,"i");e=this._rawFields.filter(e=>s.test(`${e.name} ${e.label}`))}else e=this._rawFields;this.fields=e.map(e=>je({},e,{isExpanded:!!this._expandedFieldNames[e.name]}))}_getFlattenedFields(e){return Object(x.c)(e).map(e=>this._fullApiName(e))}_fullApiName(e){return D(this._namespace,e)}}Object(i.registerDecorators)(xe,{publicProps:{sobject:{config:0},relationship:{config:0},childrelation:{config:0},rootlevel:{config:0},keyword:{config:3}},wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["sobjectMeta","fields","_namespace","_keyword","_rawFields","_expandedFieldNames"]});var Se=Object(i.registerComponent)(xe,{tmpl:we});function Me(e,t,s,l){const{h:r,t:a,b:o,d:n,c:c,k:d,i:p}=e,{_m0:u,_m1:h}=l;return[r("ul",{classMap:{"slds-tree":!0},key:9},p(t.relationships,(function(e){return e.relationshipName?r("li",{attrs:{"aria-level":"1","aria-selected":e.isActive,role:"treeitem"},key:d(8,e.relationshipName)},[r("div",{classMap:{"slds-tree__item":!0},key:6},[r("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-m-right_x-small":!0},attrs:{"aria-hidden":"false",tabindex:"-1",title:"Expand Child Relationship","data-name":e.relationshipName},key:3,on:{click:u||(l._m0=o(t.toggleChildRelationship))}},[r("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_small":!0},attrs:{"aria-hidden":"true"},key:1},[r("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#chevronright")},key:0},[])]),r("span",{classMap:{"slds-assistive-text":!0},key:2},[a("Expand Child Relationship")])]),r("span",{classMap:{"slds-has-flexi-truncate":!0},key:5},[r("a",{classMap:{"slds-tree__item-label":!0,"slds-truncate":!0},attrs:{title:e.itemLabel,"data-name":e.relationshipName},key:4,on:{click:h||(l._m1=o(t.selectRelationship))}},[n(e.itemLabel)])])]),e.isExpanded?c("cmp-fields-tree",Se,{props:{sobject:e.childSObject,childrelation:e.relationshipName,rootlevel:"2"},key:7},[]):null]):null})))]}var Ce=Object(i.registerTemplate)(Me);function Re(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){Te(e,t,s[t])}))}return e}function Te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Me.stylesheets=[],Me.stylesheetTokens={hostAttribute:"cmp-relationshipsTree-_relationshipsTree-host",shadowAttribute:"cmp-relationshipsTree-_relationshipsTree"};class Le extends i.LightningElement{constructor(...e){super(...e),this.sobject=void 0,this.sobjectMeta=void 0,this.relationships=[],this._namespace=void 0,this._keyword=void 0,this._rawRelationships=[],this._expandedRelationshipNames={}}get keyword(){return this._keyword}set keyword(e){this._keyword!==e&&(this._keyword=e,this._filterRelationships())}storeChange({sobject:e,ui:t}){this._namespace=t.namespace;const s=e[this.sobject];s&&(s.data&&(this.sobjectMeta=s.data),this._updateRelationships(t.query))}selectRelationship(e){const t=e.target.dataset.name;Z.dispatch(function(e){return{type:"TOGGLE_RELATIONSHIP",payload:{relationshipName:e}}}(t))}toggleChildRelationship(e){const t=e.target.dataset.name;this._expandedRelationshipNames[t]=!this._expandedRelationshipNames[t],this._filterRelationships()}_updateRelationships(e){if(!this.sobjectMeta)return;const t=e?this._getFlattenedFields(e):[];this._rawRelationships=this.sobjectMeta.childRelationships.map(e=>Re({},e,{itemLabel:`${e.relationshipName} / ${e.childSObject}`,isActive:t.includes(D(this._namespace,e.relationshipName)),isExpanded:!1})),this._filterRelationships()}_filterRelationships(){let e;if(this.keyword){const t=q(this.keyword),s=new RegExp(t,"i");e=this._rawRelationships.filter(e=>s.test(`${e.relationshipName} ${e.childSObject}`))}else e=this._rawRelationships;this.relationships=e.map(e=>Re({},e,{isExpanded:!!this._expandedRelationshipNames[e.relationshipName]}))}_getFlattenedFields(e){return Object(x.c)(e).map(e=>D(this._namespace,e))}}Object(i.registerDecorators)(Le,{publicProps:{sobject:{config:0},keyword:{config:3}},wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["sobjectMeta","relationships","_namespace","_keyword","_rawRelationships","_expandedRelationshipNames"]});var Ae=Object(i.registerComponent)(Le,{tmpl:Ce});function Fe(e,t,s,l){const{c:r,h:a,t:o,b:n,d:c,k:d,i:u}=e,{_m0:h,_m1:b,_m2:m}=l;return[t.isLoading?r("base-spinner",p,{key:0},[]):null,t.sobjectMeta?a("div",{classMap:{"slds-tree_container":!0},key:25},[a("div",{classMap:{"slds-p-left_small":!0},key:7},[a("div",{classMap:{"slds-grid":!0},key:6},[a("button",{classMap:{"slds-button":!0,"slds-button_icon":!0},attrs:{title:"Back"},key:4,on:{click:h||(l._m0=n(t.deselectSObject))}},[a("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:2},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#back")},key:1},[])]),a("span",{classMap:{"slds-assistive-text":!0},key:3},[o("Back")])]),a("h2",{classMap:{"slds-tree__group-header":!0,"slds-truncate":!0},key:5},[c(t.sobjectMeta.name),o(" / "),c(t.sobjectMeta.label)])])]),a("div",{classMap:{"slds-form-element":!0,"slds-p-horizontal_large":!0},key:14},[a("label",{classMap:{"slds-form-element__label":!0,"slds-assistive-text":!0},key:8},[o("Filter fields")]),a("div",{classMap:{"slds-form-element__control":!0,"slds-input-has-icon":!0,"slds-input-has-icon_left":!0},key:13},[a("span",{classMap:{"slds-icon_container":!0,"slds-icon-utility-search":!0},key:11},[a("svg",{classMap:{"slds-icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0,"slds-icon-text-default":!0},attrs:{"aria-hidden":"true"},key:10},[a("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#search")},key:9},[])])]),a("input",{classMap:{"slds-input":!0},attrs:{type:"search",placeholder:"Quick Find"},key:12,on:{keyup:b||(l._m1=n(t.setKeyword))}},[])])]),a("div",{classMap:{"slds-tabs_default":!0},key:24},[a("ul",{classMap:{"slds-tabs_default__nav":!0},attrs:{role:"tablist"},key:17},u(t.tabs,(function(e){return a("li",{classMap:{"slds-tabs_default__item":!0},attrs:{"aria-selected":e.isActive,title:e.label},key:d(16,e.id)},[a("a",{classMap:{"slds-tabs_default__link":!0},attrs:{role:"tab",tabindex:"-1","data-id":e.id},key:15,on:{click:m||(l._m2=n(t.selectTab))}},[c(e.label)])])}))),t.isFieldsActive?a("div",{classMap:{"slds-tabs_default__content":!0},attrs:{role:"tabpanel"},key:20},[t.sobjectMeta?a("div",{classMap:{"left-panel-scrollable":!0},key:19},[r("cmp-fields-tree",Se,{props:{sobject:t.sobjectMeta.name,keyword:t.keyword},key:18},[])]):null]):null,t.isRelationshipsActive?a("div",{classMap:{"slds-tabs_default__content":!0},attrs:{role:"tabpanel"},key:23},[t.sobjectMeta?a("div",{classMap:{"left-panel-scrollable":!0},key:22},[r("cmp-relationships-tree",Ae,{props:{sobject:t.sobjectMeta.name,keyword:t.keyword},key:21},[])]):null]):null])]):null]}var Pe=Object(i.registerTemplate)(Fe);function qe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Fe.stylesheets=[],ve&&Fe.stylesheets.push.apply(Fe.stylesheets,ve),Fe.stylesheetTokens={hostAttribute:"cmp-fieldsPanel-_fieldsPanel-host",shadowAttribute:"cmp-fieldsPanel-_fieldsPanel"};class Ie extends i.LightningElement{constructor(...e){super(...e),this.tabs=[{id:"tab-fields",label:"Fields",isActive:!0},{id:"tab-relationships",label:"Child Relationships",isActive:!1}],this.sobjectMeta=void 0,this.keyword=void 0,this.isLoading=void 0,this._selectedSObject=void 0}storeChange({sobjects:e,sobject:t,ui:s}){const{namespace:i,selectedSObject:l}=s;if(!l)return;const r=D(i,l);if(e&&!e.data.sobjects.find(e=>e.name===r))return;r!==this._selectedSObject&&(this._selectedSObject=r,Z.dispatch(ie(this._selectedSObject)));const a=t[this._selectedSObject];a&&(this.isLoading=a.isFetching,a.data?this.sobjectMeta=a.data:a.error&&(console.error(a.error),_e({message:"Failed to describe sObject",errors:a.error}),Z.dispatch({type:"CLEAR_SOBJECT_ERROR",payload:{sObjectName:this._selectedSObject}})))}get isFieldsActive(){return!!this.tabs.find(e=>"tab-fields"===e.id&&e.isActive)}get isRelationshipsActive(){return!!this.tabs.find(e=>"tab-relationships"===e.id&&e.isActive)}deselectSObject(){Z.dispatch({type:"DESELECT_SOBJECT"})}selectTab(e){const t=e.target.dataset.id;this.tabs=this.tabs.map(e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){qe(e,t,s[t])}))}return e}({},e,{isActive:e.id===t}))}setKeyword(e){this.keyword=e.target.value}}Object(i.registerDecorators)(Ie,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["tabs","sobjectMeta","keyword","isLoading","_selectedSObject"]});var Ue=Object(i.registerComponent)(Ie,{tmpl:Pe});var De=[function(e,t,s){return(s?":host{flex:1;display:flex;flex-direction:column}":e+"{flex:1;display:flex;flex-direction:column}")+".soql-editor"+t+"{position:relative;flex:1;display:flex}.soql-editor"+t+" textarea"+t+"{flex:1}.completion-popover"+t+"{position:absolute;width:300px;max-height:100%;overflow:auto}.slds-listbox__option[aria-selected=true]"+t+"{background:rgba(21,137,238,.1);box-shadow:inset .25rem 0 0 #1589ee}"}];function Ne(e,t,s,i){const{t:l,b:r,h:a,d:o,k:n,i:c}=e,{_m0:d,_m1:p,_m2:u,_m3:h,_m4:b,_m5:m}=i;return[a("div",{classMap:{"slds-p-around_small":!0},key:2},[a("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:0,on:{click:d||(i._m0=r(t.runQuery))}},[l("Execute SOQL")]),a("button",{classMap:{"slds-button":!0,"slds-button_neutral":!0},key:1,on:{click:p||(i._m1=r(t.formatQuery))}},[l("Format SOQL")])]),a("div",{classMap:{"soql-editor":!0,"slds-m-horizontal_small":!0,"slds-m-bottom_small":!0},key:10},[a("textarea",{classMap:{"slds-textarea":!0,"soql-input":!0},attrs:{placeholder:"Input SOQL"},key:3,on:{keydown:u||(i._m2=r(t.handleKeydownSoql)),keyup:h||(i._m3=r(t.handleKeyupSoql)),blur:b||(i._m4=r(t.handleBlurSoql))}},[]),t.isCompletionVisible?a("div",{classMap:{"completion-popover":!0,"slds-popover":!0},style:t.completionStyle,key:9},[a("ul",{classMap:{"slds-listbox":!0,"slds-listbox_vertical":!0},attrs:{role:"presentation"},key:8},c(t.completionFields,(function(e){return a("li",{classMap:{"slds-listbox__item":!0},attrs:{role:"presentation"},key:n(7,e.name)},[a("div",{classMap:{"slds-media":!0,"slds-listbox__option":!0,"slds-listbox__option_plain":!0,"slds-media_small":!0},attrs:{"aria-selected":e.isActive,role:"option"},key:6},[a("span",{classMap:{"slds-media__body":!0},key:5},[a("span",{classMap:{"slds-truncate":!0},attrs:{title:e.itemLabel,"data-name":e.name},key:4,on:{click:m||(i._m5=r(t.insertField))}},[o(e.itemLabel)])])])])})))]):null])]}var Qe=Object(i.registerTemplate)(Ne);Ne.stylesheets=[],De&&Ne.stylesheets.push.apply(Ne.stylesheets,De),Ne.stylesheetTokens={hostAttribute:"cmp-queryEditorPanel-_queryEditorPanel-host",shadowAttribute:"cmp-queryEditorPanel-_queryEditorPanel"};var $e=s(105),Be=s.n($e);function Ve(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){ze(e,t,s[t])}))}return e}function ze(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Je extends i.LightningElement{constructor(...e){super(...e),this.isCompletionVisible=void 0,this.completionStyle=void 0,this.completionFields=void 0,this._namespace=void 0,this._sobjectMeta=void 0,this._selectionStart=void 0,this._soql=void 0}get soql(){return this._soql}set soql(e){this._soql=e;const t=this.template.querySelector(".soql-input");t&&(t.value=e)}storeChange({sobject:e,ui:t}){const{namespace:s,query:i,soql:l}=t;if(this._namespace=s,e&&i){const t=e[D(s,i.sObject)];t&&(this._sobjectMeta=t.data)}l!==this.soql&&(this.soql=l)}runQuery(){if(!T)return;const e=this.template.querySelector(".soql-input");if(!e)return;const t=e.value;var s,i;t&&Z.dispatch((s=t,i=this._namespace,async e=>{if(P()){e({type:"REQUEST_QUERY"});let t={};i&&(t["Sforce-Call-Options"]="defaultNamespace="+i),T.request({method:"GET",url:"/query?q="+encodeURIComponent(s),headers:t}).then(t=>{e(function(e,t){return{type:"RECEIVE_QUERY_SUCCESS",payload:{data:e,soql:t}}}(t,s)),e({type:"UPDATE_API_LIMIT"})}).catch(t=>{e({type:"RECEIVE_QUERY_ERROR",payload:{error:t}})})}}))}formatQuery(){Z.dispatch({type:"FORMAT_SOQL"})}insertField(e){const t=e.target.dataset.name;this._closeCompletionTimer&&clearTimeout(this._closeCompletionTimer);const s=this.completionFields.find(e=>e.name===t),i=this.template.querySelector(".soql-input");this._insertField(i,s)}handleKeyupSoql(e){const{value:t}=e.target;this._soql!==t&&Z.dispatch(te(t)),this._sobjectMeta&&(this.isCompletionVisible?this._handleCompletion(e):this._openCompletion(e))}handleKeydownSoql(e){const{key:t,isComposing:s}=e;if(this.isCompletionVisible){if(s)return;switch(t){case"ArrowDown":this._selectBellowField(e);break;case"ArrowUp":this._selectAboveField(e);break;case"Enter":this._insertFieldByKeyboard(e)}}else s&&"Enter"===t&&this._openCompletion(e)}handleBlurSoql(){this._closeCompletionTimer=setTimeout(()=>this._closeCompletion(),100)}_openCompletion(e){const{target:t}=e;this._selectionStart=this._findSeparator(t.value.substring(0,t.selectionEnd))||t.selectionEnd,this._canOpenCompletion(e)&&this._searchCompletionFields(e)}_canOpenCompletion(e){const{key:t,altKey:s,ctrlKey:i,metaKey:l,isComposing:r}=e;return i&&" "===t||1===t.length&&![" ",",","."].includes(t)&&!s&&!i&&!l&&!r||r&&"Enter"===t}_findSeparator(e){const t=/[,. ][^,. ]*$/g.exec(e);return t&&t.index+1}_closeCompletion(){this.isCompletionVisible=!1}_setCompletionPosition(e){const{target:t}=e,s=Be()(t,t.selectionStart);this.completionStyle=`top:${s.top+s.height}px;left:${s.left}px;`}_searchCompletionFields(e){const{target:t}=e,s=q(t.value.substring(this._selectionStart,t.selectionEnd)),i=new RegExp(s,"i");this.completionFields=this._sobjectMeta.fields.filter(e=>i.test(`${e.name} ${e.label}`)).map((e,t)=>Ve({},e,{itemLabel:`${e.name} / ${e.label}`,isActive:0===t})),this.completionFields.length>0?(this._setCompletionPosition(e),this.isCompletionVisible=!0):this.isCompletionVisible=!1}_handleCompletion(e){const{key:t,altKey:s,ctrlKey:i,metaKey:l}=e;switch((s||i||l)&&this._closeCompletion(),t){case".":case",":case" ":case"Escape":case"ArrowLeft":case"ArrowRight":this._closeCompletion();break;case"Backspace":this._deleteKeyword(e);break;case"ArrowDown":case"ArrowUp":case"Enter":e.isComposing&&this._searchCompletionFields(e);break;default:this._searchCompletionFields(e)}}_deleteKeyword(e){this._searchCompletionFields(e),this._selectionStart===e.target.selectionStart&&this._closeCompletion()}_selectBellowField(e){e.preventDefault();const t=this._getActiveFieldIndex();t+1<this.completionFields.length&&(this.completionFields=this.completionFields.map((e,s)=>Ve({},e,{isActive:s===t+1})))}_selectAboveField(e){e.preventDefault();const t=this._getActiveFieldIndex();t>0&&(this.completionFields=this.completionFields.map((e,s)=>Ve({},e,{isActive:s===t-1})))}_getActiveFieldIndex(){return this.completionFields.findIndex(e=>e.isActive)}_insertFieldByKeyboard(e){e.preventDefault();const t=this.completionFields.find(e=>e.isActive),{target:s}=e;this._insertField(s,t)}_insertField(e,t){if(t){const s=e.value,i=s.substring(0,this._selectionStart),l=s.substring(e.selectionStart),r=Q(this._namespace,t.name);this.soql=i+r+l;const a=this._selectionStart+r.length;e.focus(),e.setSelectionRange(a,a),Z.dispatch(te(this.soql))}this._closeCompletion()}}Object(i.registerDecorators)(Je,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["isCompletionVisible","completionStyle","completionFields","_namespace","_sobjectMeta","_selectionStart","_soql"]});var Ge=Object(i.registerComponent)(Je,{tmpl:Qe});var Ke=[function(e,t,s){return(s?":host{width:100%}":e+"{width:100%}")+".slds-tabs_default"+t+"{height:100%;display:flex;flex-direction:column}.slds-tabs_default__content"+t+"{padding:0;flex:1}.slds-scrollable"+t+"{position:absolute;top:0;bottom:0;right:0;left:0}.recent-query-item"+t+"{overflow:hidden}.recent-query-item:hover"+t+"{background:#f3f2f2;cursor:pointer}"}];function He(e,t,s,i){const{t:l,gid:r,h:a,d:o,k:n,b:c,i:d}=e,{_m0:p}=i;return[a("div",{classMap:{"slds-tabs_default":!0},key:6},[a("ul",{classMap:{"slds-tabs_default__nav":!0},attrs:{role:"tablist"},key:2},[a("li",{classMap:{"slds-tabs_default__item":!0,"slds-is-active":!0},attrs:{title:"Recent Queries",role:"presentation"},key:1},[a("a",{classMap:{"slds-tabs_default__link":!0},attrs:{href:"javascript:void(0);",role:"tab",tabindex:"-1","aria-selected":"false","aria-controls":""+r("tab-recent-queries"),id:r("tab-recent-queries__item")},key:0},[l("Recent Queries")])])]),a("div",{classMap:{"slds-tabs_default__content":!0},attrs:{id:r("tab-recent-queries"),role:"tabpanel","aria-labelledby":""+r("tab-recent-queries__item")},key:5},[a("div",{classMap:{"slds-scrollable":!0},key:4},d(t.recentQueries,(function(e){return a("div",{classMap:{"slds-p-around_small":!0,"slds-border_bottom":!0,"recent-query-item":!0},attrs:{title:e.soql,"data-key":e.key},key:n(3,e.key),on:{click:p||(i._m0=c(t.selectQuery))}},[o(e.soql)])})))])])]}var We=Object(i.registerTemplate)(He);He.stylesheets=[],Ke&&He.stylesheets.push.apply(He.stylesheets,Ke),He.stylesheetTokens={hostAttribute:"cmp-queryListPanel-_queryListPanel-host",shadowAttribute:"cmp-queryListPanel-_queryListPanel"};class Ye extends i.LightningElement{constructor(...e){super(...e),this.recentQueries=void 0}storeChange({ui:e}){e.recentQueries&&(this.recentQueries=e.recentQueries.map((e,t)=>({key:""+t,soql:e})))}connectedCallback(){Z.dispatch({type:"LOAD_RECENT_QUERIES"})}selectQuery(e){const{key:t}=e.target.dataset,s=this.recentQueries.find(e=>e.key===t);s&&Z.dispatch(te(s.soql))}}Object(i.registerDecorators)(Ye,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["recentQueries"]});var Ze=Object(i.registerComponent)(Ye,{tmpl:We});var Xe=[function(e,t,s){return(s?":host{flex:1;display:flex;flex-direction:column;position:relative}":e+"{flex:1;display:flex;flex-direction:column;position:relative}")+".child-relationsihp-panel"+t+"{position:relative;flex:1;display:flex}.child-relationsihp-panel"+t+" .slds-button"+t+"{position:absolute;top:.25rem;right:.25rem;z-index:100}"}];var et=[function(e,t,s){return(s?":host{flex:1;flex-direction:column;display:flex}":e+"{flex:1;flex-direction:column;display:flex}")+".output-panel"+t+"{position:relative;flex:1}.slds-table--header-fixed_container"+t+"{position:absolute;min-width:100%;height:100%;left:0;border-top:1px solid #dddbda;border-right:1px solid #dddbda}.slds-cell-fixed"+t+",td"+t+",th"+t+"{max-width:400px;min-width:50px}.slds-cell-fixed"+t+"{padding-left:.5rem;transform:translate(-.25rem);line-height:2rem}.slds-cell-fixed"+t+':before{content:"";border-left:1px solid #dddbda;position:absolute;height:2rem;left:calc(.25rem - 1px)}'}];var tt=[function(e,t,s){return s?":host{display:flex}":e+"{display:flex}"}];function st(e,t,s,l){const{h:r,t:a,b:o,d:n}=e,{_m0:c}=l;return[t.isChildRelationship?r("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-m-right_xx-small":!0},attrs:{title:"Show Child Relationship"},key:3,on:{click:c||(l._m0=o(t.handleClick))}},[r("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_small":!0},attrs:{"aria-hidden":"true"},key:1},[r("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#record_lookup")},key:0},[])]),r("span",{classMap:{"slds-assistive-text":!0},key:2},[a("Show Child Relationship")])]):null,r("div",{classMap:{"slds-truncate":!0},attrs:{title:t.value.data},key:5},[t.url?r("a",{attrs:{href:t.url,target:"_blank",tabindex:"-1"},key:4},[n(t.value.data)]):null,t.url?null:n(t.value.data)])]}var it=Object(i.registerTemplate)(st);st.stylesheets=[],tt&&st.stylesheets.push.apply(st.stylesheets,tt),st.stylesheetTokens={hostAttribute:"cmp-outputCell-_outputCell-host",shadowAttribute:"cmp-outputCell-_outputCell"};class lt extends i.LightningElement{constructor(...e){super(...e),this.value=void 0}get isChildRelationship(){return this.value&&this.value.rawData&&this.value.rawData.totalSize}get url(){return/^[0-9A-Za-z]{18}$/.test(this.value.data)?`${T.instanceUrl}/${this.value.data}`:null}handleClick(){Z.dispatch({type:"SELECT_CHILD_RELATIONSHIP",payload:{childRelationship:this.value.rawData}})}}Object(i.registerDecorators)(lt,{publicProps:{value:{config:0}}});var rt=Object(i.registerComponent)(lt,{tmpl:it});function at(e,t,s,i){const{d:l,h:r,k:a,i:o,c:n,b:c}=e,{_m0:d}=i;return[r("div",{classMap:{"output-panel":!0,"slds-scrollable_x":!0},key:11},[r("div",{classMap:{"slds-table--header-fixed_container":!0},key:10},[r("div",{classMap:{"slds-scrollable_y":!0},key:9,on:{scroll:d||(i._m0=c(t.handleScroll))}},[r("table",{classMap:{"slds-table":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0,"slds-table--header-fixed":!0},key:8},[r("thead",{key:3},[r("tr",{classMap:{"slds-line-height_reset":!0},key:2},o(t.columns,(function(e){return r("th",{classMap:{},attrs:{scope:"col"},key:a(1,e)},[r("div",{classMap:{"slds-cell-fixed":!0,"slds-truncate":!0},attrs:{title:e},key:0},[l(e)])])})))]),r("tbody",{key:7},o(t.rows,(function(e){return r("tr",{classMap:{"slds-hint-parent":!0},key:a(6,e.key)},o(e.values,(function(e){return r("td",{key:a(5,e.key)},[n("cmp-output-cell",rt,{props:{value:e},key:4},[])])})))})))])])])])]}var ot=Object(i.registerTemplate)(at);at.stylesheets=[],et&&at.stylesheets.push.apply(at.stylesheets,et),at.stylesheetTokens={hostAttribute:"cmp-outputTable-_outputTable-host",shadowAttribute:"cmp-outputTable-_outputTable"};class nt{constructor(e){this.columnMap=new Map,this.columns=[],this.records=void 0,this.records=e}collect(){return this.records.forEach(e=>{this._collectColumnMap(e)}),this._collectColumns(),this.columns}_collectColumnMap(e,t=[]){Object.keys(e).forEach(s=>{if("attributes"!==s){let i=this.columnMap;t.forEach(e=>{i=i.get(e)}),i.has(s)||i.set(s,new Map);const l=e[s];l instanceof Object&&(l.totalSize||this._collectColumnMap(l,[...t,s]))}})}_collectColumns(e=this.columnMap,t=[]){for(let[s,i]of e)i.size?this._collectColumns(i,[...t,s]):this.columns.push([...t,s].join("."))}}Object(i.registerDecorators)(nt,{fields:["columnMap","columns","records"]});class ct extends i.LightningElement{constructor(...e){super(...e),this.columns=void 0,this.rows=void 0,this._response=void 0,this._allRows=void 0}set response(e){this._response=e;let t=[];const s=new nt(e.records).collect();e.records.forEach((e,i)=>{let l={key:i,values:[]};s.forEach((t,s)=>{const r=this._getFieldValue(t,e);let a=r;a&&a.totalSize&&(a=a.totalSize+" rows"),l.values.push({key:`${i}-${s}`,data:a,rawData:r,column:t})}),t.push(l)}),this.columns=s,this._allRows=t,this.rows=t.slice(0,200)}get response(){return this._response}generateCsv(){const e=e=>/[\n",]/.test(e)?`"${e.replace(/"/g,'""')}"`:e;return`${this.columns.map(e).join(",")}\n${this._allRows.map(t=>t.values.map(t=>e(t.data)).join(",")).join("\n")}`}handleScroll(e){const{target:t}=e;if(t.scrollTop+t.clientHeight>=t.scrollHeight){const e=this.rows.length;e<this._allRows.length&&(this.rows=[...this.rows,...this._allRows.slice(e,e+200)])}}_getFieldValue(e,t){let s=t;return e.split(".").forEach(e=>{s&&(s=s[e])}),s}}Object(i.registerDecorators)(ct,{publicProps:{response:{config:3}},publicMethods:["generateCsv"],fields:["columns","rows","_response","_allRows"]});var dt=Object(i.registerComponent)(ct,{tmpl:ot});function pt(e,t,s,l){const{c:r,t:a,b:o,h:n,d:c}=e,{_m0:d,_m1:u}=l;return[t.isLoading?r("base-spinner",p,{key:0},[]):null,t.response?n("div",{classMap:{"slds-p-around_small":!0,"slds-grid":!0},key:3},[n("button",{classMap:{"slds-button":!0,"slds-button_neutral":!0},key:1,on:{click:d||(l._m0=o(t.exportCsv))}},[a("Export CSV")]),n("div",{classMap:{"slds-p-around_x-small":!0,"slds-col_bump-left":!0},key:2},[a("Total: "),c(t.response.totalSize)])]):null,t.response?r("cmp-output-table",dt,{classMap:{"main-output":!0},props:{response:t.response},key:4},[]):null,t.response&&t.childResponse?n("div",{classMap:{"child-relationsihp-panel":!0},key:10},[n("button",{classMap:{"slds-button":!0,"slds-button_icon":!0},attrs:{title:"Close Child Relationship"},key:8,on:{click:u||(l._m1=o(t.closeChildRelationship))}},[n("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:6},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","./resources/slds/icons/utility-sprite/svg/symbols.svg#close")},key:5},[])]),n("span",{classMap:{"slds-assistive-text":!0},key:7},[a("Close Child Relationship")])]),r("cmp-output-table",dt,{props:{response:t.childResponse},key:9},[])]):null]}var ut=Object(i.registerTemplate)(pt);pt.stylesheets=[],Xe&&pt.stylesheets.push.apply(pt.stylesheets,Xe),pt.stylesheetTokens={hostAttribute:"cmp-outputPanel-_outputPanel-host",shadowAttribute:"cmp-outputPanel-_outputPanel"};class ht extends i.LightningElement{constructor(...e){super(...e),this.response=void 0,this.childResponse=void 0,this.isLoading=void 0,this._sObject=void 0}storeChange({query:e,ui:t}){this.isLoading=e.isFetching,e.data?this.response!==e.data&&(this.response=e.data,this._sObject=t.query.sObject):this.response=void 0,e.error&&(console.error(e.error),_e({message:"Failed to execute SOQL",errors:e.error}),Z.dispatch({type:"CLEAR_QUERY_ERROR"})),this.childResponse=t.childRelationship}closeChildRelationship(){Z.dispatch({type:"DESELECT_CHILD_RELATIONSHIP"})}exportCsv(){const e=this.template.querySelector("cmp-output-table.main-output").generateCsv(),t=new Uint8Array([239,187,191]),s=new Blob([t,e],{type:"text/csv"}),i=URL.createObjectURL(s),l=document.createElement("a");l.href=window.URL.createObjectURL(s),l.download=this._sObject+".csv",l.click(),URL.revokeObjectURL(i)}}Object(i.registerDecorators)(ht,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["response","childResponse","isLoading","_sObject"]});var bt=Object(i.registerComponent)(ht,{tmpl:ut});var mt=[function(e,t,s){return".slds-welcome-mat__info"+t+"{background-image:url(resources/slds/images/welcome-mat/bg-info@2x.png)}.logo"+t+"{height:60px}"}];function _t(e,t,s,i){const{h:l,t:r,b:a}=e,{_m0:o,_m1:n}=i;return[l("section",{classMap:{"slds-modal":!0,"slds-fade-in-open":!0,"slds-modal_small":!0},attrs:{role:"dialog",tabindex:"-1","aria-modal":"true"},key:14},[l("div",{classMap:{"slds-modal__container":!0},key:13},[l("div",{classMap:{"slds-modal__content":!0},key:12},[l("div",{classMap:{"slds-welcome-mat":!0,"slds-welcome-mat_splash":!0},key:11},[l("div",{classMap:{"slds-welcome-mat__content":!0,"slds-grid":!0},key:10},[l("div",{classMap:{"slds-welcome-mat__info":!0,"slds-size_1-of-1":!0},key:9},[l("div",{classMap:{"slds-welcome-mat__info-content":!0},key:8},[l("div",{classMap:{"slds-m-bottom_x-large":!0},key:1},[l("img",{classMap:{logo:!0},attrs:{src:"./resources/imgs/logo.svg"},key:0},[])]),l("h2",{classMap:{"slds-welcome-mat__info-title":!0},key:2},[r("Welcome to LWC SOQL Builder!")]),l("div",{classMap:{"slds-welcome-mat__info-description":!0,"slds-text-longform":!0},key:4},[l("p",{key:3},[r("LWC SOQL Builder is a SOQL execution tool developed in Lightning Web Components Open Source, which provides useful features such as viewing the list of items, completing item names, saving queries, and exporting execution results to CSV.")])]),l("div",{classMap:{"slds-welcome-mat__info-actions":!0},key:7},[l("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:5,on:{click:o||(i._m0=a(t.loginProduction))}},[r("Login to Production Org")]),l("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:6,on:{click:n||(i._m1=a(t.loginSandbox))}},[r("Login to Sandbox Org")])])])])])])])])]),l("div",{classMap:{"slds-backdrop":!0,"slds-backdrop_open":!0},key:15},[])]}var yt=Object(i.registerTemplate)(_t);_t.stylesheets=[],mt&&_t.stylesheets.push.apply(_t.stylesheets,mt),_t.stylesheetTokens={hostAttribute:"cmp-welcomeModal-_welcomeModal-host",shadowAttribute:"cmp-welcomeModal-_welcomeModal"};class ft extends i.LightningElement{loginProduction(){F("https://login.salesforce.com")}loginSandbox(){F("https://test.salesforce.com")}}var gt=Object(i.registerComponent)(ft,{tmpl:yt});function vt(e,t,s,i){const{c:l,h:r}=e;return[t.isLoading?l("base-spinner",p,{key:0},[]):null,r("div",{classMap:{app:!0},key:15},[r("div",{key:2},[l("cmp-header",re,{key:1},[])]),r("div",{classMap:{body:!0},key:14},[r("div",{classMap:{"left-panel":!0},key:5},[t.selectedSObject?null:l("cmp-sobjects-panel",ge,{key:3},[]),t.selectedSObject?l("cmp-fields-panel",Ue,{key:4},[]):null]),r("div",{classMap:{"right-panel":!0},key:13},[r("div",{classMap:{"right-top-panel":!0},key:10},[r("div",{classMap:{"right-top-left-panel":!0},key:7},[l("cmp-query-editor-panel",Ge,{key:6},[])]),r("div",{classMap:{"right-top-right-panel":!0},key:9},[l("cmp-query-list-panel",Ze,{key:8},[])])]),r("div",{classMap:{"right-bottom-panel":!0},key:12},[l("cmp-output-panel",bt,{key:11},[])])])])]),t.isLoggedIn?null:l("cmp-welcome-modal",gt,{key:16},[])]}var kt=Object(i.registerTemplate)(vt);vt.stylesheets=[],r&&vt.stylesheets.push.apply(vt.stylesheets,r),vt.stylesheetTokens={hostAttribute:"app-container-_container-host",shadowAttribute:"app-container-_container"};class Ot extends i.LightningElement{storeChange({metadata:e,ui:t}){this.isLoggedIn=t.isLoggedIn,t.selectedSObject?this.selectedSObject=t.selectedSObject:this.selectedSObject=null,e.error&&(console.error(e.error),_e({message:"Failed to fetch Metadata.",errors:e.error}),Z.dispatch({type:"CLEAR_METADATA_ERROR"}))}constructor(){super(),this.isLoading=void 0,this.isLoggedIn=void 0,this.selectedSObject=void 0,this.isLoading=!0,function(e){const t=window.location.hash;M.a.browser.init(R),M.a.browser.on("disconnect",()=>{localStorage.removeItem("lsb.accessToken"),localStorage.removeItem("lsb.instanceUrl")});const s=localStorage.getItem("lsb.accessToken"),i=localStorage.getItem("lsb.instanceUrl");if(s&&i)return T=new M.a.Connection({accessToken:s,instanceUrl:i,version:"48.0",proxyUrl:C()}),void L(e);M.a.browser.on("connect",t=>{localStorage.setItem("lsb.accessToken",t.accessToken),localStorage.setItem("lsb.instanceUrl",t.instanceUrl),T=t,L(e)}),t&&M.a.browser.init(R),!t&&e&&e()}(this._loginCallback.bind(this)),window.addEventListener("show-toast",e=>{const{detail:t}=e;if(!t)return;const{message:s="Unexpected error occured.",errors:l=[]}=t,r=Object(i.createElement)("base-toast",{is:me});r.message=s,r.errors=l,document.body.appendChild(r)})}_loginCallback(e,t){if(this.isLoading=!1,e)return console.error(e),void _e({message:"Failed to fetch login user. Your token is expired. Please login again.",errors:e});t&&(Z.dispatch(function(e){return{type:"LOGIN",payload:{user:e}}}(t)),Z.dispatch(ee()),Z.dispatch(se()))}}Object(i.registerDecorators)(Ot,{wire:{storeChange:{adapter:X,params:{},static:{store:Z},method:1}},fields:["isLoading","isLoggedIn","selectedSObject"]});var wt=Object(i.registerComponent)(Ot,{tmpl:kt});const jt={"Service Worker":"serviceWorker"in navigator};Object.keys(jt).some(e=>!jt[e])?function(){const{outdated:e}=window;e.style.display="unset";let t="This browser doesn't support all the required features";t+="<ul>";for(const[e,s]of Object.entries(jt))t+=`<li><b>${e}:<b> ${s?"":""}</li>`;t+="</ul>",e.querySelector(".unsupported_message").innerHTML=t}():(Object(l.registerWireService)(i.register),customElements.define("app-container",Object(i.buildCustomElementConstructor)(wt)),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js"),console.log("Service worker registered")}))}});